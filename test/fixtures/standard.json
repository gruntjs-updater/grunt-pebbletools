{"key":"standard","val":[{"key":"theModel_appInstances","val":[{"key":"theInstance","val":[{"key":"description","VAL_CDATA":"The standard library with no styling.  This library is always required."},{"key":"deployment","val":[{"key":"theControlApp","val":[{"key":"name","val":"Test Standard Library"},{"key":"description"},{"key":"testItem","val":[{"key":"parent","attr":{"ref":"a2"}},{"key":"text","val":"hello"},{"key":"number","val":"10"},{"key":"date","val":"1/10/2012"},{"key":"bool","val":"true"}]},{"key":"testItems","val":[{"key":"a0","val":[{"key":"parent","attr":{"ref":"a2"}},{"key":"text","val":"test0"},{"key":"number","val":"10"},{"key":"date","val":"1/10/2012"},{"key":"bool","val":"true"}]},{"key":"a1","val":[{"key":"parent","attr":{"ref":"_top"}},{"key":"text","val":"test1"},{"key":"number","val":"1"},{"key":"date","val":"1/1/2012"},{"key":"bool","val":"true"}]},{"key":"a2","val":[{"key":"parent","attr":{"ref":"a1"}},{"key":"text","val":"test2"},{"key":"number","val":"2"},{"key":"date","val":"1/2/2012"},{"key":"bool","val":"true"}]},{"key":"a3","val":[{"key":"parent","attr":{"ref":"_top"}},{"key":"text","val":"test3"},{"key":"number","val":"3"},{"key":"date","val":"1/3/2012"},{"key":"bool","val":"true"}]},{"key":"a4","val":[{"key":"parent","attr":{"ref":"a2"}},{"key":"text","val":"test4"},{"key":"number","val":"4"},{"key":"date","val":"1/4/2012"},{"key":"bool","val":"true"}]},{"key":"a5","val":[{"key":"parent","attr":{"ref":"a2"}},{"key":"text","val":"test5"},{"key":"number","val":"5"},{"key":"date","val":"1/5/2012"},{"key":"bool","val":"true"}]},{"key":"a6","val":[{"key":"parent","attr":{"ref":"_top"}},{"key":"text","val":"test6"},{"key":"number","val":"6"},{"key":"date","val":"1/6/2012"},{"key":"bool","val":"true"}]},{"key":"a7","val":[{"key":"parent","attr":{"ref":"a1"}},{"key":"text","val":"test7"},{"key":"number","val":"7"},{"key":"date","val":"1/7/2012"},{"key":"bool","val":"true"}]},{"key":"a8","val":[{"key":"parent","attr":{"ref":"_top"}},{"key":"text","val":"test8"},{"key":"number","val":"8"},{"key":"date","val":"1/8/2012"},{"key":"bool","val":"true"}]},{"key":"a9","val":[{"key":"parent","attr":{"ref":"a2"}},{"key":"text","val":"test9"},{"key":"number","val":"9"},{"key":"date","val":"1/9/2012"},{"key":"bool","val":"true"}]}]},{"key":"testEmbItems","val":[{"key":"a0","val":[{"key":"text","val":"testEmbItem0"}]},{"key":"a1","val":[{"key":"text","val":"testEmbItem1"}]},{"key":"a2","val":[{"key":"text","val":"testEmbItem2"}]},{"key":"a3","val":[{"key":"text","val":"testEmbItem3"}]},{"key":"a4","val":[{"key":"text","val":"testEmbItem4"}]}]}]},{"key":"groupMaps"},{"key":"accessPoints","val":[{"key":"testAppControl","val":[{"key":"topControl","attr":{"ref":"testAppControl"}},{"key":"dependencies","val":[{"key":"a1","attr":{"ref":"standard"}}]},{"key":"config","val":"{\n  \"imports\": [\"../src/client/config.json\"],\n  \"basePath\": \"..\",\n  \"files\": [\n    \"karma/testEnv.js\",\n    \"tests/object/*\",\n    \"tests/shared/*\",\n    \"tests/client/*\"\n  ]\n}\n"}]},{"key":"testDragDrop","val":[{"key":"topControl","attr":{"ref":"testDragDrop"},"val":[{"key":"array","val":[{"key":"a0","val":"test0"},{"key":"a1","val":"test1"},{"key":"a2","val":"test2"},{"key":"a3","val":"test3"},{"key":"a4","val":"test4"}]}]},{"key":"dependencies","val":[{"key":"a1","attr":{"ref":"standard"}}]}]},{"key":"testImage","val":[{"key":"topControl","attr":{"ref":"testImage"}},{"key":"dependencies","val":[{"key":"a1","attr":{"ref":"standard"}}]}]},{"key":"testNumber","val":[{"key":"topControl","attr":{"ref":"testNumber"}},{"key":"dependencies","val":[{"key":"a1","attr":{"ref":"standard"}}]}]}]}]},{"key":"clientScripts","val":[{"key":"testServer","val":[{"key":"devCode","val":"\n\n(function (){\n\n  /**\n   * @constructor\n   */\n  function Service(ws, ds) {\n    pebble.shared.ServerControl.call(this, ws, ds);\n  \t//this.addTestData();\n  }\n  pebble.inherits(Service, pebble.shared.ServerControl);\n\t\n  var clientServer = new Service(new pebble.libs.standard.impl.WebSocketServerClientSideImpl(), new pebble.shared.ServerDataImpl_Xml());\n  \n  //so it is reachable from our tests (testRealTime.js)\n  pebble.testServer = clientServer;\n\t\t\t\t\t\n\tpebble.serverProxies[\"SERVER\"] = new pebble.libs.standard.ServerProxy(new pebble.libs.standard.impl.CommClientSideImpl(clientServer), new pebble.libs.standard.impl.WebSocketClientSideImpl(clientServer));\n\n\n})();\n      "},{"key":"path","val":"frontend/src/testServer.js"},{"key":"ext","val":"js"}]}]},{"key":"cssTemplates","val":[{"key":"standard","val":[{"key":"css","val":"  \n        \n.droppable \n{\n  border-width: 2px; \n  border-color: green; \n  border-style: solid;\n  }\n  \n  .not-droppable {\n  border-width: 2px; \n  border-color: red; \n  border-style: solid;\n  }\n  \n  .overProxySide_INNER {\n  border-width: 2px; \n  border-color: pink; \n  border-style: solid;\n  }\n  \n  .overProxySide_TOP {\n  border-width: 2px; \n  border-color: green; \n  border-style: solid none none none;\n  }\n  \n  .overProxySide_BOT {\n  border-width: 2px; \n  border-color: green; \n  border-style: none none solid none;\n  }\n  \n  .overProxySide_RIGHT {\n  border-width: 2px; \n  border-color: green; \n  border-style: none solid none none;\n  }\n  \n  .overProxySide_LEFT {\n  border-width: 2px; \n  border-color: green; \n  border-style: none none none solid;\n  }\n\n  /*ArrayStackControl*/\n  .swipe {\n    overflow: hidden;\n    visibility: hidden;\n    position: relative;\n  }\n  .swipe-wrap {\n    overflow: hidden;\n    position: relative;\n  }\n  .swipe-wrap > div {\n    float:left;\n    width:100%;\n    position: relative;\n  }\n\n  /*StackPanel*/\n  .listStackPanelhide {\n    position:absolute;\n    top:0px;\n    left:0px;\n    right:0px;\n    bottom:0px;\n    background-color:#fff;\n     display:none;\n  }\n  .listStackPanelshow {\n    position:absolute;\n    top:0px;\n    left:0px;\n   right:0px;\n    bottom:0px;\n    background-color:#fff;\n    display:block;\n  }\n                 "}]}]},{"key":"serverScripts","val":[{"key":"a0","val":[{"key":"devCode","val":""},{"key":"path","val":"server/src/a0.js"},{"key":"ext","val":"js"}]}]}]}]},{"key":"theModel_controls","val":[{"key":"AppControlBase","val":[{"key":"description","VAL_CDATA":" "},{"key":"inherits","attr":{"ref":"theModel.clientWorkspace.libs.standard.controls.ClientControl"}},{"key":"fields","val":[{"key":"path","val":[{"key":"name","val":"path"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.itemRelRef"}}]},{"key":"global","val":[{"key":"name","val":"global"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.clientGlobal"}}]}]},{"key":"testCode","val":"\nvar topApp;\n\ndescribe('testAppControl', function () {\n\n\tfunction getBaseInnerMarkup() {\n\t\tvar ctrl = new pebble.Pebble();\n\t\tctrl.setRef('.', 'standard:Text');\n\n\t\tvar innerMarkup = new pebble.Pebble();\n\t\tinnerMarkup.set('div.control', ctrl);\n\n\t\treturn innerMarkup;\n\t}\n\n\tbeforeEach(function() {\n\n\t\tvar ready = false;\n\t\truns(function() {\n\t\t\tgetDeployment(function(depObj) {\n\t\t\t\ttopApp && topApp.kill();\n\t\t\t\ttopApp = new pebble.libs.standard.TopModule(document.createElement('div'), depObj, 'top');\n\t\t\t\ttopApp.load(function() {\n\t\t\t\t\tready = true;\t\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn ready;\n\t\t}, 'wait for deployment and testAppControl', 300);\n\n\t\truns(function() {\n\n\t\t\tvar innerMarkup = getBaseInnerMarkup();\t\n\t\t\tvar dm = topApp.item;\n\n\t\t\tdm.set('innerMarkup', innerMarkup);\n\t\t\ttopApp.item.loadManager.ctxLoaded = false;\n\t\t\ttopApp.getItem(dm);\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\tctrl1 = topApp.item.modules['childmod0'].item; \n\t\t\toriginInfo = ctrl1.getOriginInfo('model');\n\t\t\treturn topApp.item.loadManager.ctxLoaded;\t \n\t\t}, 'ctx did not load', 300);\n\t});\n\n\tit ('can setData / getData', function() {\n\n\t\tvar returned = false;\n\t\truns(function() {\n\t\t\tvar obj = new pebble.Pebble();\n\t\t\tvar params = obj.getParams();\n\t\t\tvar data = new pebble.Pebble();\n\t\t\tdata.setValue('.', 'hello');\n\t\t\tparams.setRef('path', 'aaa.bbb');\n\t\t\tparams.set('data', data);\n\t\t\tobj.setCallback(function() { returned = true; });\n\t\t\ttopApp.item.setData(obj);\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn returned;\n\t\t}, 'setData should have returned', 300);\n\n\t\truns(function() {\n\n\t\t\texpect(topApp.item.getOriginInfo('aaa.bbb').getValue()).toEqual('hello'); \n\t\t});\n\t\t\n\t\tvar returned = false;\n\t\tvar obj = new pebble.Pebble();\n\t\truns(function() {\n\t\t\tvar params = obj.getParams();\n\t\t\tparams.setRef('path', 'aaa.bbb');\n\t\t\tobj.setCallback(function() { returned = true; });\n\t\t\ttopApp.item.getData(obj);\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn returned;\n\t\t}, 'getData should have returned', 300);\n\n\t\truns(function() {\n\t\t\texpect(obj.getValue('.')).toEqual('hello'); \n\t\t});\n\t\t\n\t\tvar returned = false;\n\t\truns(function() {\n\t\t\tvar obj = new pebble.Pebble();\n\t\t\tvar params = obj.getParams();\n\t\t\tparams.setRef('path', 'aaa.bbb');\n\t\t\tparams.set('data', null);\n\t\t\tobj.setCallback(function() { returned = true; });\n\t\t\ttopApp.item.setData(obj);\n\t\t});\n\n\t});\n\n\tit ('can getData of null will return empty item, thus empty is also null', function() {\n\n\t\tvar returned = false;\n\t\tvar obj = new pebble.Pebble();\n\t\truns(function() {\n\t\t\tvar params = obj.getParams();\n\t\t\tparams.setRef('path', 'aaa.bbb');\n\t\t\tobj.setCallback(function() { returned = true; });\n\t\t\ttopApp.item.getData(obj);\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn returned;\n\t\t}, 'getData should have returned', 300);\n\n\t\truns(function() {\n\t\t\texpect(obj.getRecords('.').length).toEqual(0); \n\t\t});\n\t});\n\n\tit ('can toggle a bool value (null=falsy is false)', function() {\n\n\t\tvar returned = false;\n\t\tvar obj = new pebble.Pebble();\n\t\truns(function() {\n\t\t\tvar params = obj.getParams();\n\t\t\tparams.setRef('path', 'ccc');\n\t\t\tobj.setCallback(function() { returned = true; });\n\t\t\ttopApp.item.toggle(obj);\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn returned;\n\t\t}, 'getData should have returned', 300);\n\n\t\truns(function() {\n\t\t\texpect(topApp.item.getOriginInfo('ccc').getValue()).toEqual('true'); \n\t\t});\n\t\t\n\t\tvar returned = false;\n\t\tvar obj = new pebble.Pebble();\n\t\truns(function() {\n\t\t\tvar params = obj.getParams();\n\t\t\tparams.setRef('path', 'ccc');\n\t\t\tobj.setCallback(function() { returned = true; });\n\t\t\ttopApp.item.toggle(obj);\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn returned;\n\t\t}, 'getData should have returned', 300);\n\n\t\truns(function() {\n\t\t\texpect(topApp.item.getOriginInfo('ccc').getValue()).toEqual('false'); \n\t\t});\n\t});\n\n\tit ('can loadControl ', function() {\n\n\t\tvar returned = false;\n\t\tvar obj = new pebble.Pebble();\n\t\tvar ctrlRef =  'standard:Text';\n\t\truns(function() {\n\t\t\tvar params = obj.getParams();\n\t\t\tparams.setRef('control', ctrlRef);\n\t\t\tobj.setCallback(function() { returned = true; });\n\t\t\ttopApp.item.modules['childmod0'].item.loadControl(obj);\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn returned;\n\t\t}, 'loadControl should have returned', 300);\n\n\t\truns(function() {\n\t\t\tvar ctrl = topApp.item.modules['childmod0'].item;\n\t\t\texpect(ctrl.getRef('.')).toEqual('theModel.libs.standard.controls.Text');\n\t\t});\n\t});\n\n\n\n});\n\n\n"},{"key":"path","val":"frontend/test/controls/AppControlBase.js"},{"key":"ext","val":"js"}]},{"key":"ArrayControl","val":[{"key":"description","VAL_CDATA":" "},{"key":"fields","val":[{"key":"displayControl","val":[{"key":"name","val":"display control"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.displayControl"}}]}]},{"key":"inherits","attr":{"ref":"theModel.clientWorkspace.libs.standard.controls.ArrayTreeBase"}},{"key":"testCode","val":"\nvar topApp;\n\n\ndescribe('testArrayControl', function () {\n\tbeforeEach(function() {\n\n\t\tvar ready = false;\n\t\truns(function() {\n\t\t\tgetDeployment(function(depObj) {\n\t\t\t\ttopApp && topApp.kill();\n\t\t\t\ttopApp = new pebble.libs.standard.TopModule(document.createElement('div'), depObj, 'top');\n\t\t\t\ttopApp.load(function() {\n\t\t\t\t\tready = true;\t\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn ready;\n\t\t}, 'wait for deployment and testAppControl', 300);\n\n\t\truns(function() {\n\t\t\tvar bindPoint = 'model.testEmbItems';\t\n\t\t\tvar innerMarkup = new pebble.Pebble();\n\n\t\t\tvar ctrl1 = new pebble.Pebble();\n\t\t\tctrl1.setRef('.', 'standard:ArrayControl');\n\t\t\tctrl1.setRef('model._bind', bindPoint);\n\n\t\t\tvar control1 = new pebble.Pebble();\n\t\t\tcontrol1.setRef('.', 'standard:TextInput');\n\t\t\tcontrol1.setRef('model._bind', 'model');\n\n\t\t\tvar displayControl1 = new pebble.Pebble();\n\t\t\tdisplayControl1.setRef('mapPath', 'text');\n\t\t\tdisplayControl1.set('innerMarkup.control', control1);\n\n\t\t\tctrl1.set('childElement.input', new pebble.Pebble());\n\t\t\tctrl1.setAttribute('childElement.input', 'type', 'text');\n\t\t\tctrl1.set('displayControl', displayControl1);\n\n\t\t\tvar div1 = new pebble.Pebble('div');\n\t\t\tdiv1.set('control', ctrl1);\n\n\t\t\tinnerMarkup.add('.', div1);\n\n\t\t\tvar ctrl2 = new pebble.Pebble();\n\t\t\tctrl2.setRef('.', 'standard:ArrayControl');\n\t\t\tctrl2.setRef('model._bind', bindPoint);\n\n\t\t\tvar displayControl2 = new pebble.Pebble();\n\t\t\tdisplayControl2.setValue('innerMarkup', '{{item.text}}');\n\n\t\t\tctrl2.set('childElement.div', new pebble.Pebble());\n\t\t\tctrl2.set('displayControl', displayControl2);\n\n\t\t\tvar div2 = new pebble.Pebble('div');\n\t\t\tdiv2.set('control', ctrl2);\n\n\t\t\tinnerMarkup.add('.', div2);\n\n\t\t\tvar dm = topApp.item;\n\n\t\t\tdm.set('innerMarkup', innerMarkup);\n\t\t\ttopApp.item.loadManager.ctxLoaded = false;\n\t\t\ttopApp.getItem(dm);\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\tctrl1 = topApp.item.modules['childmod0'].item; \n\t\t\toriginInfo = ctrl1.getOriginInfo('model');\n\t\t\treturn topApp.item.loadManager.ctxLoaded;\t \n\t\t}, 'ctx did not load', 300);\n\n\t});\n\n\t//this.deleteArrayControlItem\n\t//this.setSingleSelectedItem\n\tit ('should be able to render embedded items (simple/normal)', function() {\n\n\t\truns(function() {\n\t\t\t//normal\n\t\t\tvar ctrl1 = topApp.item.modules['childmod0'].item; \n\t\t\tvar originInfo = ctrl1.getOriginInfo('model');\n\t\t\texpect(originInfo.getThisType().getRef('arrayFormId').split('.').pop()).toEqual('testItem');\n\t\t\texpect(Object.keys(ctrl1.modules).length).toEqual(5);\n\t\t\texpect(ctrl1.modules['a4'].item.modules['childmod0'].element.tagName.toUpperCase()).toEqual('INPUT');\n\t\t\texpect(ctrl1.modules['a4'].item.modules['childmod0'].element.value).toEqual('testEmbItem4');\n\t\t\t\n\t\t\t//simpleMarkup\t\n\t\t\tvar ctrl2 = topApp.item.modules['childmod1'].item; \n\t\t\tvar originInfo = ctrl2.getOriginInfo('model');\n\t\t\texpect(originInfo.getThisType().getRef('arrayFormId').split('.').pop()).toEqual('testItem');\n\t\t\texpect(Object.keys(ctrl2.modules).length).toEqual(0);\n\t\t\texpect(ctrl2.element.childNodes.length).toEqual(5);\n\t\t\texpect(ctrl2.element.childNodes[4].innerHTML).toEqual('testEmbItem4');\n\n\t\t});\n\t});\n\n\tit ('should be able to update embedded items (simple/normal)', function() {\n\n\t\tvar returned = false;\n\t\truns(function() {\n\t\t\t//normal\t\n\t\t\tvar ctrl1 = topApp.item.modules['childmod0'].item; \n\t\t\tvar ctrl2 = topApp.item.modules['childmod1'].item; \n\t\t\tctrl1.modules['a4'].element.value = 'update a4';\n\t\t\tspyOn(ctrl1, 'updateArrayItem').andCallThrough();\n\t\t\t\n\t\t\tspyOn(ctrl1, 'onArrayItemsUpdated').andCallThrough();\n\t\t\tspyOn(ctrl2, 'onArrayItemsUpdated').andCallThrough();\n\t\t\tctrl1.modules['a4'].item.saveManager.save(function() {\n\t\t\t\t\n\t\t\t\treturned = true;\n\n\t\t\t});\n\t\t\t\n\t\t\twaitsFor(function() {\n\t\t\t\treturn returned;\t \n\t\t\t}, 'save did not load', 300);\n\n\t\t\truns(function() {\n\t\t\t\t//simpleMarkup\t\n\t\t\t\tvar testItem = ctrl2.getOriginInfo('model.a4').get();\n\n\t\t\t\texpect(ctrl1.updateArrayItem).toHaveBeenCalled();\n\t\t\t\texpect(ctrl1.updateArrayItem.calls.length).toEqual(1);\n\t\t\t\texpect(ctrl1.onArrayItemsUpdated).toHaveBeenCalled();\n\t\t\t\texpect(ctrl1.onArrayItemsUpdated.calls.length).toEqual(1);\n\t\t\t\t\n\t\t\t\texpect(ctrl2.onArrayItemsUpdated).toHaveBeenCalled();\n\t\t\t\texpect(ctrl2.onArrayItemsUpdated.calls.length).toEqual(1);\n\n\t\t\t\texpect(testItem.getValue('text')).toEqual('update a4');\n\t\t\t\texpect(ctrl2.element.childNodes[4].innerHTML).toEqual('update a4');\n\t\t\t\t\n\t\t\t\texpect(ctrl1.modules['a4'].item.modules['childmod0'].element.value).toEqual('update a4'); //source should update itself\n\t\n\t\t\t});\n\t\t});\n\t});\n\n\tit ('should be able to delete embedded items (simple/normal)', function() {\n\n\t\tvar returned = false;\n\t\truns(function() {\n\t\t\t//normal\t\n\t\t\tvar ctrl1 = topApp.item.modules['childmod0'].item; \n\t\t\tctrl1.setSelectedItem('a2', function() {\n\t\t\t\t\n\t\t\t\tvar obj = new pebble.Pebble();\n\t\t\t\tvar params = obj.getParams();\n\t\t\t\tparams.setRef('.', 'SERVER.deleteArrayItem');\n\t\t\t\tobj.setCallback(function() {\n\t\t\t\t\treturned = true;\n\t\t\t\t});\n\t\t\t\tctrl1.deleteArrayItem(obj);\n\n\t\t\t});\n\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\treturn returned;\t \n\t\t}, 'delete did not return', 300);\n\n\t\truns(function() {\n\t\t\tvar ctrl1 = topApp.item.modules['childmod0'].item; \n\t\t\texpect(Object.keys(ctrl1.modules).length).toEqual(4);\n\t\t\t\n\t\t\t//simpleMarkup\t\n\t\t\tvar ctrl2 = topApp.item.modules['childmod1'].item; \n\t\t\texpect(Object.keys(ctrl2.modules).length).toEqual(0);\n\t\t\texpect(ctrl2.element.childNodes.length).toEqual(4);\n\n\t\t});\n\t});\n\n\tit ('should be able to change full array - embedded items (simple/normal)', function() {\n\n\t\tvar returned = false;\n\t\truns(function() {\n\t\t\t//create new array\n\t\t\tvar array = new pebble.Pebble();\n\t\t  array.setValue('a0.text', 'newtext0');\n\t\t  array.setValue('a1.text', 'newtext1');\n\t\t \t\n\t\t\tvar ctrl1 = topApp.item.modules['childmod0'].item; \n\t\t\tvar originInfo = ctrl1.getOriginInfo('model');\n\t\t\toriginInfo.set(array, ctrl1, false, function () {\n\t\t\t\treturned = true;\n\t\t\t});\n\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\treturn returned;\t \n\t\t}, 'set did not load', 300);\n\n\t\truns(function() {\n\t\t\tvar ctrl1 = topApp.item.modules['childmod0'].item; \n\t\t\texpect(Object.keys(ctrl1.modules).length).toEqual(2);\n\t\t\texpect(ctrl1.modules['a1'].element.tagName.toUpperCase()).toEqual('INPUT');\n\t\t\texpect(ctrl1.modules['a1'].element.value).toEqual('newtext1');\n\t\t\t\n\t\t\t//simpleMarkup\t\n\t\t\tvar ctrl2 = topApp.item.modules['childmod1'].item; \n\t\t\tvar originInfo = ctrl2.getOriginInfo('model');\n\t\t\texpect(Object.keys(ctrl2.modules).length).toEqual(0);\n\t\t\texpect(ctrl2.element.childNodes.length).toEqual(2);\n\t\t\texpect(ctrl2.element.childNodes[1].innerHTML).toEqual('newtext1');\n\n\n\t\t});\n\n\t});\n\n\n});\n\n\n"},{"key":"path","val":"frontend/test/controls/ArrayControl.js"},{"key":"ext","val":"js"}]},{"key":"ArraySelect","val":[{"key":"inherits","attr":{"ref":"theModel.clientWorkspace.libs.standard.controls.ArrayControl"}},{"key":"fields","val":[{"key":"model","val":[{"key":"name","val":"array"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.array"},"val":[{"key":"arrayFormId","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.command"}}]}]}]}]},{"key":"ArraySingleControl","val":[{"key":"inherits","attr":{"ref":"theModel.clientWorkspace.libs.standard.controls.ArrayControl"}},{"key":"fields","val":[{"key":"model","val":[{"key":"name","val":"array"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.array"},"val":[{"key":"arrayFormId","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]}]}]},{"key":"testCode","val":"\nvar topApp;\n\ndescribe('testArraySingleControl', function () {\n\n\tfunction getBaseInnerMarkup() {\n\t\tvar ctrl = new pebble.Pebble();\n\t\tctrl.setRef('.', 'standard:DynControl');\n\t\tctrl.setRef('model._bind', 'testItem');\n\n\t\t\t\t\t\t\t\t\t//<displayControlFilters>\n                    //<a1>\n                        //<filter>item.ref_ == 'standard:Text'</filter>\n                        //<displayControl>\n                            //<innerMarkup>\n                                //<input type='text'>\n                                    //<control ref='theModel.libs.standard.controls.textInput'>\n                                        //<dummy/>\n                                    //</control>\n                                //</input>\n                            //</innerMarkup>\n                        //</displayControl>\n                    //</a1>\n                //</displayControlFilters>\t\n\t\t\n\t\tvar dcf = new pebble.Pebble();\n\t\tdcf.setValue('filter', '(item.ref_).indexOf(\"text\") != -1');\n\t\t\n\t\tvar control = new pebble.Pebble();\n\t\tcontrol.setRef('.', 'standard:TextInput');\n\n\t\tvar displayControl = new pebble.Pebble();\n\t\tdisplayControl.setAttribute('innerMarkup.input', 'type', 'text');\n\t\tdisplayControl.set('innerMarkup.input.control', control);\n\n\t\tdcf.set('displayControl', displayControl);\n\t\t\n\t\tvar displayControlFilters = new pebble.Pebble();\n\t\tdisplayControlFilters.set('a0', dcf);\n\n\t\tctrl.set('displayControlFilters', displayControlFilters);\n\n\t\t//ctrl.setRef('onSelected.exec', 'this.save');\n\n\t\tvar div1 = new pebble.Pebble('div');\n\t\tdiv1.set('control', ctrl);\n\n\t\tvar innerMarkup = new pebble.Pebble();\n\t\tinnerMarkup.add('.', div1);\n\t\treturn innerMarkup;\n\t}\n\n\tbeforeEach(function() {\n\n\t\tvar ready = false;\n\t\truns(function() {\n\t\t\tgetDeployment(function(depObj) {\n\t\t\t\ttopApp && topApp.kill();\n\t\t\t\ttopApp = new pebble.libs.standard.TopModule(document.createElement('div'), depObj, 'top');\n\t\t\t\ttopApp.load(function() {\n\t\t\t\t\tready = true;\t\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn ready;\n\t\t}, 'wait for deployment and testAppControl', 300);\n\n\t\truns(function() {\n\n\t\t\tvar innerMarkup = getBaseInnerMarkup();\t\n\t\t\tvar dm = topApp.item;\n\n\t\t\tdm.set('innerMarkup', innerMarkup);\n\t\t\ttopApp.item.loadManager.ctxLoaded = false;\n\t\t\ttopApp.getItem(dm);\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\tctrl1 = topApp.item.modules['childmod0'].item; \n\t\t\treturn topApp.item.loadManager.ctxLoaded;\t \n\t\t}, 'ctx did not load', 300);\n\t});\n\n\tit ('should be able to render and any item (not a reference)', function() {\n\n\t\tvar dynControl = topApp.item.modules['childmod0'].item;\t\n\t\texpect(dynControl.getRef('.').split('.').pop()).toEqual('DynControl');\n\t\tvar textInput = dynControl.modules['childmod0'].item;\n\t\texpect(textInput.element.tagName.toUpperCase()).toEqual('INPUT');\n\t\texpect(textInput.getRef('model._bind')).toEqual('model.text');\n\n\t});\n\n\tit ('should be able to save and any item (not a reference)', function() {\n\n\t\truns(function() {\n\t\t\tvar dynControl = topApp.item.modules['childmod0'].item;\t\n\t\t\tvar textInput = dynControl.modules['childmod0'].item;\n\t\t\ttextInput.element.value = 'hello';\n\t\t\ttopApp.item.saveManager.save(function() {});\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\t\treturn topApp.item.saveManager.isValidSave;\n\t\t}, 'Reference should load embedded references.  Reference should select if exists.', 3000);\n\n\t\truns(function() {\n\t\t\texpect(topApp.item.getValue('testItem.text')).toEqual('hello');\n\t\t});\n\t});\n\n});\n\n\n"},{"key":"path","val":"frontend/test/controls/ArraySingleControl.js"},{"key":"ext","val":"js"}]},{"key":"ArrayStackControl","val":[{"key":"inherits","attr":{"ref":"theModel.clientWorkspace.libs.standard.controls.ArrayControl"}},{"key":"fields","val":[{"key":"model","val":[{"key":"name","val":"array"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.array"},"val":[{"key":"arrayFormId","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]}]}]},{"key":"testCode","val":"\nvar topApp;\n\ndescribe('testArrayStackControl', function () {\n\n\tfunction getBaseInnerMarkup() {\n\t\tvar ctrl = new pebble.Pebble();\n\t\tctrl.setRef('.', 'standard:DynControl');\n\t\tctrl.setRef('model._bind', 'testItem');\n\n\t\t\t\t\t\t\t\t\t//<displayControlFilters>\n                    //<a1>\n                        //<filter>item.ref_ == 'theModel.libs.standard.types.text'</filter>\n                        //<displayControl>\n                            //<innerMarkup>\n                                //<input type='text'>\n                                    //<control ref='theModel.libs.standard.controls.textInput'>\n                                        //<dummy/>\n                                    //</control>\n                                //</input>\n                            //</innerMarkup>\n                        //</displayControl>\n                    //</a1>\n                //</displayControlFilters>\t\n\t\t\n\t\tvar dcf = new pebble.Pebble();\n\t\tdcf.setValue('filter', '(item.ref_).indexOf(\"text\") != -1');\n\t\t\n\t\tvar control = new pebble.Pebble();\n\t\tcontrol.setRef('.', 'standard:TextInput');\n\n\t\tvar displayControl = new pebble.Pebble();\n\t\tdisplayControl.setAttribute('innerMarkup.input', 'type', 'text');\n\t\tdisplayControl.set('innerMarkup.input.control', control);\n\n\t\tdcf.set('displayControl', displayControl);\n\t\t\n\t\tvar displayControlFilters = new pebble.Pebble();\n\t\tdisplayControlFilters.set('a0', dcf);\n\n\t\tctrl.set('displayControlFilters', displayControlFilters);\n\n\t\t//ctrl.setRef('onSelected.exec', 'this.save');\n\n\t\tvar div1 = new pebble.Pebble('div');\n\t\tdiv1.set('control', ctrl);\n\n\t\tvar innerMarkup = new pebble.Pebble();\n\t\tinnerMarkup.add('.', div1);\n\t\treturn innerMarkup;\n\t}\n\n\tit ('requires deployment and testAppControl', function() {\n\t\tvar ready = false;\n\t\truns(function() {\n\t\t\tgetDeployment(function(depObj) {\n\t\t\t\ttopApp && topApp.kill();\n\t\t\t\ttopApp = new pebble.libs.standard.TopModule(document.createElement('div'), depObj, 'top');\n\t\t\t\ttopApp.load(function() {\n\t\t\t\t\tready = true;\t\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn ready;\n\t\t}, 'wait for deployment and testAppControl', 300);\n\n\t});\n\n\tit ('should be able to render and any item (not a reference)', function() {\n\n\t\tvar innerMarkup = getBaseInnerMarkup();\t\n\t\tvar dm = topApp.item;\n\n\t\tdm.set('innerMarkup', innerMarkup);\n\n\t\truns(function() {\n\t\t\ttopApp.item.loadManager.ctxLoaded = false;\n\t\t\ttopApp.getItem(dm);\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn topApp.item.loadManager.ctxLoaded;// && topApp.item.modules['childmod0'] && topApp.item.modules['childmod0'].item.modules['childmod0'];\n\t\t}, 'Reference should load embedded references.  Reference should select if exists.', 3000);\n\n\t\truns(function() {\n\n\t\t\tvar dynControl = topApp.item.modules['childmod0'].item;\t\n\t\t\texpect(dynControl.getRef('.').split('.').pop()).toEqual('DynControl');\n\t\t\tvar textInput = dynControl.modules['childmod0'].item;\n\t\t\texpect(textInput.element.tagName.toUpperCase()).toEqual('INPUT');\n\t\t\texpect(textInput.getRef('model._bind')).toEqual('model.text');\n\n\t\t});\n\t});\n\n\tit ('should be able to save and any item (not a reference)', function() {\n\n\t\truns(function() {\n\t\t\tvar dynControl = topApp.item.modules['childmod0'].item;\t\n\t\t\tvar textInput = dynControl.modules['childmod0'].item;\n\t\t\ttextInput.element.value = 'hello';\n\t\t\ttopApp.item.saveManager.save(function() {});\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\t\treturn topApp.item.saveManager.isValidSave;\n\t\t}, 'Reference should load embedded references.  Reference should select if exists.', 3000);\n\n\t\truns(function() {\n\t\t\texpect(topApp.item.getValue('testItem.text')).toEqual('hello');\n\t\t});\n\t});\n\n});\n\n\n"},{"key":"path","val":"frontend/test/controls/ArrayStackControl.js"},{"key":"ext","val":"js"}]},{"key":"ArrayTreeBase","val":[{"key":"description","VAL_CDATA":"Base for controls handling arrays."},{"key":"fields","props":[{"key":"_arrayPages","val":[{"key":"name","val":"_arrayPages"},{"key":"type","attr":{"ref":"theModel.libs.standard.types.array"},"val":[{"key":"arrayFormId","attr":{"ref":"theModel.libs.standard.types.arrayPage"}}]}]}],"val":[{"key":"filter","val":[{"key":"name","val":"collection filter"},{"key":"description","VAL_CDATA":"only used by collections.  Only one control should control what is retrieved."},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.queryCondition"}}]},{"key":"showRecsFilter","val":[{"key":"name","val":"control filter"},{"key":"description","VAL_CDATA":"filters the records for this control."},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.queryCondition"}}]},{"key":"selectionAction","val":[{"key":"name","val":"selectionAction"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.function"}}]},{"key":"beforeSelectionAction","val":[{"key":"name","val":"beforeSelectionAction"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.function"}}]},{"key":"itemsPerPage","val":[{"key":"name","val":"itemsPerPage"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.number"}}]},{"key":"sortFields","val":[{"key":"name","val":"sortFields"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.array"},"val":[{"key":"arrayFormId","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.sortField"}}]}]},{"key":"writeFields","val":[{"key":"name","val":"write fields"},{"key":"description","VAL_CDATA":"specify write fields to ensure only certain fields are updated (no specification results in the entire item being updated)."},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.array"},"val":[{"key":"arrayFormId","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]}]},{"key":"collection","val":[{"key":"name","val":"collection"},{"key":"type","attr":{"ref":"theModel.libs.standard.types.array"}}]}]},{"key":"inherits","attr":{"ref":"theModel.clientWorkspace.libs.standard.controls.ClientControl"}},{"key":"testCode","val":"\nvar topApp, ctrl1, originInfo;\n\ndescribe('testArrayTreeBase', function () {\n\n\tbeforeEach(function() {\n\n\t\tvar ready = false;\n\t\truns(function() {\n\t\t\tgetDeployment(function(depObj) {\n\t\t\t\ttopApp && topApp.kill();\n\t\t\t\ttopApp = new pebble.libs.standard.TopModule(document.createElement('div'), depObj, 'top');\n\t\t\t\ttopApp.load(function() {\n\t\t\t\t\tready = true;\t\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn ready;\n\t\t}, 'wait for deployment and testAppControl', 300);\n\n\t\truns(function() {\n\n\t\t\tvar bindPoint = 'model.testEmbItems';\n\t\t\tvar innerMarkup = new pebble.Pebble();\n\n\t\t\tvar ctrl1 = new pebble.Pebble();\n\t\t\tctrl1.setRef('.', 'standard:ArrayTreeBase');\n\t\t\tctrl1.setRef('model._bind', bindPoint);\n\t\t\t//ctrl1.setRef('onSelected.exec', 'this.save');\n\n\t\t\tvar div1 = new pebble.Pebble('div');\n\t\t\tdiv1.set('control', ctrl1);\n\n\t\t\tinnerMarkup.add('.', div1);\n\n\t\t\tvar ctrl2 = new pebble.Pebble();\n\t\t\tctrl2.setRef('.', 'standard:ArrayTreeBase');\n\t\t\tctrl2.setRef('model._bind', bindPoint);\n\t\t\t\n\t\t\tvar embData = new pebble.Pebble();\n\t\t\tembData.setValue('a0.text', 'embData1');\n\t\t\tembData.setValue('a1.text', 'embData2');\n\n\t\t\tctrl2.set('model', embData);\n\n\t\t\tvar div2 = new pebble.Pebble('div');\n\t\t\tdiv2.set('control', ctrl2);\n\n\t\t\tinnerMarkup.add('.', div2);\n\t\t\tvar dm = topApp.item;\n\n\t\t\tdm.set('innerMarkup', innerMarkup);\n\t\t\ttopApp.item.loadManager.ctxLoaded = false;\n\t\t\ttopApp.getItem(dm);\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\tctrl1 = topApp.item.modules['childmod0'].item; \n\t\t\toriginInfo = ctrl1.getOriginInfo('model');\n\t\t\treturn topApp.item.loadManager.ctxLoaded;\t \n\t\t}, 'ctx did not load', 300);\n\t});\n\n\n\tit ('arrayEmbedded', function() {\n\n\t\texpect(originInfo.getThisType().getRef('arrayFormId').split('.').pop()).toEqual('testItem');\n\t\t\n\t});\n\t\n\tit ('with embedded data should push to origin, even if the origin has data', function() {\n\n\t\texpect(originInfo.get().getRecords('.').length).toEqual(2);\n\n\t});\n\t\n\tit ('can create and remove an item', function() {\n\n\t\tvar returned = false;\n\t\truns(function() {\n\t\t\tvar obj = new pebble.Pebble();\n\t\t\tvar params = obj.getParams();\n\t\t\tobj.setCallback(function() { returned = true; });\n\t\t\tctrl1.createArrayItem(obj);\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn returned;\n\t\t}, 'createArrayItem should have returned', 300);\n\n\t\truns(function() {\n\t\t\tvar array = originInfo.get();\n\t\t\texpect(array.getRecords('.').length).toEqual(3);//2 exist from push \n\t\t\t\n\t\t\treturned = false;\n\t\t\t\n\t\t\tctrl1.removeArrayItem('a2', function() { returned = true; });\n\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\treturn returned;\n\t\t}, 'removeArrayItem should have returned', 300);\n\t\t\n\t\truns(function() {\n\t\t\n\t\t\tvar array = originInfo.get();\n\t\t\tvar recs = array.getRecords('.');\n\t\t\texpect(recs.length).toEqual(2); //now 2 recs\n\n\t\t});\n\t});\n\n\tit ('can create an item withData', function() {\n\n\t\tvar returned = false;\n\t\truns(function() {\n\t\t\tvar obj = new pebble.Pebble();\n\t\t\tvar params = obj.getParams();\n\t\t\tvar data = new pebble.Pebble();\n\t\t\tdata.setValue('text', 'text1');\n\t\t\tparams.set('withData', data);\n\t\t\tobj.setCallback(function() { returned = true; });\n\t\t\tctrl1.createArrayItem(obj);\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn returned;\n\t\t}, 'createArrayItem should have returned', 300);\n\n\t\truns(function() {\n\t\t\tvar array = originInfo.get();\n\t\t\tvar recs = array.getRecords('.');\n\t\t\texpect(recs.length).toEqual(3); \n\t\t\texpect(recs[2].getValue('text')).toEqual('text1');\n\t\t});\n\t});\n\t\t\n\tit ('can create an item with its own tag name', function() {\n\n\t\tvar returned = false;\n\t\truns(function() {\n\t\t\tvar obj = new pebble.Pebble();\n\t\t\tvar params = obj.getParams();\n\t\t\tvar data = new pebble.Pebble();\n\t\t\tdata.setValue('key_', 'myname');\n\t\t\tparams.setFull('withData', data);\n\t\t\tobj.setCallback(function() { returned = true; });\n\t\t\tctrl1.createArrayItem(obj);\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn returned;\n\t\t}, 'createArrayItem should have returned', 300);\n\n\t\truns(function() {\n\t\t\tvar array = originInfo.get();\n\t\t\tvar recs = array.getRecords('.');\n\t\t\texpect(recs.length).toEqual(3); //now 2 recs\n\t\t\texpect(recs[2].getTagName()).toEqual('myname');\n\t\t});\n\t});\n\n\tit ('can update an item', function() {\n\n\t\t//no different than save, only here to express CRUD\n\t\tvar updateItem = new pebble.Pebble();\n\t\tupdateItem.setValue('text', 'updatedText');\n\n\t\tvar mynameOrigin = ctrl1.getOriginInfo('model.myname');\n\t\tmynameOrigin.set(updateItem, null, true);//just set silent keep simple\n\n\t\tvar array = originInfo.get();\n\t\tvar myname = array.get('myname');\n\t\texpect(myname.getValue('text')).toEqual('updatedText');\n\n\t});\n\n\tit ('can add multiple items at once', function() {\n\n\t\tvar returned = false;\n\t\truns(function() {\n\t\t\t\n\t\t\tspyOn(ctrl1, 'onArrayItemsAdded').andCallThrough();\n\n\t\t\tvar items = new pebble.Pebble();\n\t\t\titems.setValue('newItem1.text', 'new text 1');\n\t\t\titems.setValue('newItem2.text', 'new text 2');\n\n\t\t\tobj = new pebble.Pebble();\n\t\t\tvar params = obj.getParams();\n\t\t\tparams.setRef('.', 'this.addItems');\n\t\t\tparams.set('withItems', items);\n\t\t\tobj.setCallback(function() {\n\t\t\t\treturned = true;\n\t\t\t});\n\t\t\tctrl1.resolve(obj);\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\treturn returned;\t \n\t\t}, 'ctx did not load', 300);\n\t\t\n\t\truns(function() {\n\n\t\t\texpect(ctrl1.onArrayItemsAdded).toHaveBeenCalled();\n\t\t\texpect(ctrl1.onArrayItemsAdded.calls.length).toEqual(1);\n\n\t\t\texpect(ctrl1.origin.getRecords().length).toEqual(4);\n\t\t\t\n\t\t});\n\t});\n});\n\n\n"},{"key":"path","val":"frontend/test/controls/ArrayTreeBase.js"},{"key":"ext","val":"js"}]},{"key":"CheckBox","val":[{"key":"inherits","attr":{"ref":"theModel.clientWorkspace.libs.standard.controls.ClientControl"}},{"key":"fields","val":[{"key":"model","val":[{"key":"name","val":"bool"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.bool"}}]}]}]},{"key":"ClientControl","val":[{"key":"description","VAL_CDATA":"This is the base for all controls (client / server)."},{"key":"fields","val":[{"key":"beforeload","val":[{"key":"name","val":"beforeload"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.function"}}]},{"key":"afterload","val":[{"key":"name","val":"afterload"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.function"}}]},{"key":"onDataChangeLogic","val":[{"key":"name","val":"onDataChangeLogic"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.function"}}]},{"key":"onSaved","val":[{"key":"name","val":"onSaved"},{"key":"description","VAL_CDATA":"Executed on edit item (top) after control data set to model.  A common use is to createArrayItem withData"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.function"}}]},{"key":"innerMarkup","val":[{"key":"name","val":"innerMarkup"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.markup"}}]}]}]},{"key":"Download","val":[{"key":"inherits","attr":{"ref":"theModel.clientWorkspace.libs.standard.controls.ClientControl"}},{"key":"fields","val":[{"key":"model","val":[{"key":"name","val":"anything"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}}]},{"key":"text","val":[{"key":"name","val":"text"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]}]}]},{"key":"DropzoneClientDatasource","val":[{"key":"inherits","attr":{"ref":"theModel.clientWorkspace.libs.standard.controls.ClientControl"}},{"key":"fields","val":[{"key":"model","val":[{"key":"name","val":"anything"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}}]},{"key":"template","val":[{"key":"name","val":"template"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.markup"}}]}]}]},{"key":"DynControl","val":[{"key":"inherits","attr":{"ref":"theModel.clientWorkspace.libs.standard.controls.ClientControl"}},{"key":"fields","val":[{"key":"model","val":[{"key":"name","val":"reference"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}}]},{"key":"displayControlFilters","val":[{"key":"name","val":"displayControlFilters"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.array"},"val":[{"key":"arrayFormId","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.displayControlFilter"}}]}]}]},{"key":"testCode","val":"\nvar topApp;\n\ndescribe('testDynControl', function () {\n\n\tfunction getBaseInnerMarkup() {\n\t\tvar ctrl = new pebble.Pebble();\n\t\tctrl.setRef('.', 'standard:DynControl');\n\t\tctrl.setRef('model._bind', 'testItem');\n\n\t\t\t\t\t\t\t\t\t//<displayControlFilters>\n                    //<a1>\n                        //<filter>item.ref_ == 'theModel.libs.standard.types.text'</filter>\n                        //<displayControl>\n                            //<innerMarkup>\n                                //<input type='text'>\n                                    //<control ref='standard:TextInput'>\n                                        //<dummy/>\n                                    //</control>\n                                //</input>\n                            //</innerMarkup>\n                        //</displayControl>\n                    //</a1>\n                //</displayControlFilters>\t\n\t\t\n\t\tvar dcf = new pebble.Pebble();\n\t\tdcf.setValue('filter', '(item.ref_).indexOf(\"text\") != -1');\n\t\t\n\t\tvar control = new pebble.Pebble();\n\t\tcontrol.setRef('.', 'standard:TextInput');\n\n\t\tvar displayControl = new pebble.Pebble();\n\t\tdisplayControl.setAttribute('innerMarkup.input', 'type', 'text');\n\t\tdisplayControl.set('innerMarkup.input.control', control);\n\n\t\tdcf.set('displayControl', displayControl);\n\t\t\n\t\tvar displayControlFilters = new pebble.Pebble();\n\t\tdisplayControlFilters.set('a0', dcf);\n\n\t\tctrl.set('displayControlFilters', displayControlFilters);\n\n\t\t//ctrl.setRef('onSelected.exec', 'this.save');\n\n\t\tvar div1 = new pebble.Pebble('div');\n\t\tdiv1.set('control', ctrl);\n\n\t\tvar innerMarkup = new pebble.Pebble();\n\t\tinnerMarkup.add('.', div1);\n\t\treturn innerMarkup;\n\t}\n\n\tit ('requires deployment and testAppControl', function() {\n\t\tvar ready = false;\n\t\truns(function() {\n\t\t\tgetDeployment(function(depObj) {\n\t\t\t\ttopApp && topApp.kill();\n\t\t\t\ttopApp = new pebble.libs.standard.TopModule(document.createElement('div'), depObj, 'top');\n\t\t\t\ttopApp.load(function() {\n\t\t\t\t\tready = true;\t\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn ready;\n\t\t}, 'wait for deployment and testAppControl', 300);\n\n\t});\n\n\tit ('should be able to render and any item (not a reference)', function() {\n\n\t\tvar innerMarkup = getBaseInnerMarkup();\t\n\t\tvar dm = topApp.item;\n\n\t\tdm.set('innerMarkup', innerMarkup);\n\n\t\truns(function() {\n\t\t\ttopApp.item.loadManager.ctxLoaded = false;\n\t\t\ttopApp.getItem(dm);\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn topApp.item.loadManager.ctxLoaded;// && topApp.item.modules['childmod0'] && topApp.item.modules['childmod0'].item.modules['childmod0'];\n\t\t}, 'Reference should load embedded references.  Reference should select if exists.', 3000);\n\n\t\truns(function() {\n\n\t\t\tvar dynControl = topApp.item.modules['childmod0'].item;\t\n\t\t\texpect(dynControl.getRef('.').split('.').pop()).toEqual('DynControl');\n\t\t\tvar textInput = dynControl.modules['childmod0'].item;\n\t\t\texpect(textInput.element.tagName.toUpperCase()).toEqual('INPUT');\n\t\t\texpect(textInput.getRef('model._bind')).toEqual('model.text');\n\n\t\t});\n\t});\n\n\tit ('should be able to save and any item (not a reference)', function() {\n\n\t\truns(function() {\n\t\t\tvar dynControl = topApp.item.modules['childmod0'].item;\t\n\t\t\tvar textInput = dynControl.modules['childmod0'].item;\n\t\t\ttextInput.element.value = 'hello';\n\t\t\ttopApp.item.saveManager.save(function() {});\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\t\treturn topApp.item.saveManager.isValidSave;\n\t\t}, 'Reference should load embedded references.  Reference should select if exists.', 3000);\n\n\t\truns(function() {\n\t\t\texpect(topApp.item.getValue('testItem.text')).toEqual('hello');\n\t\t});\n\t});\n\n});\n\n\n"},{"key":"path","val":"frontend/test/controls/DynControl.js"},{"key":"ext","val":"js"}]},{"key":"ExpressionManager","val":[{"key":"testCode","val":"\nvar topApp;\n\ndescribe('testExpression Binds', function () {\n\n\n\tvar o;\n\tvar ele = document.createElement('div');\n\tbeforeEach(function() {\n\t\to = new pebble.libs.standard.tags.Xp();\n\t});\n\n\tit ('can return binds specifiers (single)', function() {\n\t\tvar key1 = 'ctx.model';\n\t\tvar template = '{{' + key1 + '}}';\n\t\t//var template = 'this.aa.bb ctx.aa.bb mod2.aa.bb, item.@, item.@aa.bb, etc\n\t\tvar binds = o.getBinds(template, ele, null);\n\t\texpect(binds).toBeDefined();\n\t\texpect(Object.keys(binds).length).toEqual(1);\n\t\texpect(binds['ctx.model'].specifier).toEqual('ctx');\n\t\texpect(binds['ctx.model'].path).toEqual('model');\n\n\t});\n\n\tit ('can return binds specifiers (multiple)', function() {\n\t\tvar key1 = 'ctx.model';\n\t\tvar key2 = 'num1.number';\n\t\tvar template = '{{' + key1 + ' > ' + key2 + '}}';\n\t\t//var template = 'this.aa.bb ctx.aa.bb mod2.aa.bb, item.@, item.@aa.bb, etc\n\t\tvar binds = o.getBinds(template, ele, null);\n\t\texpect(binds).toBeDefined();\n\t\texpect(Object.keys(binds).length).toEqual(2);\n\t\texpect(binds[key1].specifier).toEqual('ctx');\n\t\texpect(binds[key1].path).toEqual('model');\n\t\texpect(binds[key2].specifier).toEqual('num1');\n\t\texpect(binds[key2].path).toEqual('number');\n\n\t});\n\n\tit ('can return binds specifiers (multiple expressions)', function() {\n\t\tvar key1 = 'ctx.model';\n\t\tvar key2 = 'num1.number';\n\t\tvar key3 = 'num2.number';\n\t\tvar template = '{{' + key1 + ' > ' + key2 + '}} and {{' + key3 + '}}';\n\t\tvar binds = o.getBinds(template, ele, null);\n\t\texpect(binds).toBeDefined();\n\t\texpect(Object.keys(binds).length).toEqual(3);\n\t\texpect(binds[key1].specifier).toEqual('ctx');\n\t\texpect(binds[key1].path).toEqual('model');\n\t\texpect(binds[key2].specifier).toEqual('num1');\n\t\texpect(binds[key2].path).toEqual('number');\n\t\texpect(binds[key3].specifier).toEqual('num2');\n\t\texpect(binds[key3].path).toEqual('number');\n\n\t});\n\t\n\tit ('can return binds specifiers (multiple expressions) and ignore duplicates', function() {\n\t\tvar key1 = 'ctx.model';\n\t\tvar key2 = 'num1.number';\n\t\tvar key3 = 'num2.number';\n\t\tvar template = '{{' + key1 + ' > ' + key2 + '}} and {{' + key1 + ' > ' + key3 + '}}';\n\t\tvar binds = o.getBinds(template, ele, null);\n\t\texpect(Object.keys(binds).length).toEqual(3);\n\t\texpect(binds[key1].specifier).toEqual('ctx');\n\t\texpect(binds[key1].path).toEqual('model');\n\t\texpect(binds[key2].specifier).toEqual('num1');\n\t\texpect(binds[key2].path).toEqual('number');\n\t\texpect(binds[key3].specifier).toEqual('num2');\n\t\texpect(binds[key3].path).toEqual('number');\n\n\t});\n\n\n});\n\n\n\ndescribe('testExpression getDeployment', function () {\n\n\tit ('requires deployment and testAppControl', function() {\n\t\tvar ready = false;\n\t\truns(function() {\n\t\t\tgetDeployment(function(depObj) {\n\t\t\t\ttopApp && topApp.kill();\n\t\t\t\ttopApp = new pebble.libs.standard.TopModule(document.createElement('div'), depObj, 'top');\n\t\t\t\ttopApp.load(function() {\n\t\t\t\t\tready = true;\t\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn ready;\n\t\t}, 'wait for deployment and testAppControl', 300);\n\t});\n});\n\ndescribe('testExpression', function () {\n\n\tfunction getInnerMarkup() {\n\t\t\n\t\tvar innerMarkup = new pebble.Pebble();\n\n\t\tvar ctrl1 = new pebble.Pebble();\n\t\tctrl1.setRef('.', 'standard:TextInput');\n\t\tctrl1.setRef('model._bind', 'model.testItem.text');\n\t\t\n\t\tvar div1 = new pebble.Pebble('div');\n\t\tdiv1.set('control', ctrl1);\n\n\t\tinnerMarkup.add('.', div1);\n\n\t\tvar ctrl2 = new pebble.Pebble();\n\t\tctrl2.setRef('.', 'standard:Text');\n\t\tctrl2.setValue('model', '{{ctx.model.testItem.number + ctx.model.testItem.text }}');\n\t\t\n\t\tvar div2 = new pebble.Pebble('div');\n\t\tdiv2.set('control', ctrl2);\n\n\t\tinnerMarkup.add('.', div2);\n\n\t\treturn innerMarkup;\n\t}\n\n\tbeforeEach(function() {\n\n\t\tvar innerMarkup = getInnerMarkup();\t\n\t\tvar dm = topApp.item;\n\t\tdm.set('innerMarkup', innerMarkup);\n\n\t\truns(function() {\n\t\t\ttopApp.item.loadManager.ctxLoaded = false;\n\t\t\ttopApp.getItem(dm);\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn topApp.item.loadManager.ctxLoaded;\t \n\t\t}, 'ctx did not load', 300);\n\t});\n\n\tafterEach(function() {\n\n\t});\n\n\tit ('should be able to load simple', function() {\n\n\t\truns(function() {\n\t\t\t//normal\t\n\t\t\tvar textInput = topApp.item.modules['childmod0'].item; \n\t\t\tvar text = topApp.item.modules['childmod1'].item; \n\t\t\t\n\t\t\texpect(textInput.element.value).toEqual('hello');\n\t\t\texpect(text.element.innerHTML).toEqual('10hello');\n\n\t\t});\n\t});\n\n\tit ('should be able to respond and set', function() {\n\n\t\tvar textInput = topApp.item.modules['childmod0'].item; \n\t\tvar text = topApp.item.modules['childmod1'].item; \n\t\t\n\t\tvar returned = false;\n\t\truns(function() {\n\t\t\t\n\t\t  var originInfo = textInput.getOriginInfo('model');\n\t\t  var data = new pebble.Pebble();\n\t\t  data.setValue('.', 'goodbye');\n\t\t  originInfo.set(data, null, false, function () {\n\t\t\t  returned = true;\t\n\t\t\t});\t\n\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\treturn returned;\t \n\t\t}, 'did not load', 300);\n\n\t\truns(function() {\n\t\t\texpect(text.element.innerHTML).toEqual('10goodbye');\n\n\t\t});\n\t});\n\n});\n\ndescribe('testExpression on triggers', function () {\n\n\tfunction getInnerMarkupTriggers() {\n\t\t\n\t\tvar innerMarkup = new pebble.Pebble();\n\n\t\tvar ctrl1 = new pebble.Pebble();\n\t\tctrl1.setRef('.', 'standard:TextInput');\n\t\tctrl1.setRef('model._bind', 'model.testItem.text');\n\t\t\n\t\tvar div1 = new pebble.Pebble('div');\n\t\tdiv1.set('control', ctrl1);\n\n\t\tinnerMarkup.add('.', div1);\n\n\t\tvar ctrl2 = new pebble.Pebble();\n\t\tctrl2.setRef('.', 'standard:Text');\n\t\tctrl2.setValue('model', '{{ctx.model.testItem.number + ctx.model.testItem.text }}');\n\t\tctrl2.setRef('triggers.mytrig', 'this.setClass');\n\t\tctrl2.setValue('triggers.mytrig.class', '{{ctx.model.testItem.text == \"hello\" && \"active\"}}');\n\t\t\n\t\tvar div2 = new pebble.Pebble('div');\n\t\tdiv2.set('control', ctrl2);\n\n\t\tinnerMarkup.add('.', div2);\n\n\t\treturn innerMarkup;\n\t}\n\n\tbeforeEach(function() {\n\t\tvar innerMarkup = getInnerMarkupTriggers();\t\n\t\tvar dm = topApp.item;\n\t\tdm.set('innerMarkup', innerMarkup);\n\n\t\truns(function() {\n\t\t\ttopApp.item.loadManager.ctxLoaded = false;\n\t\t\ttopApp.getItem(dm);\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn topApp.item.loadManager.ctxLoaded;\t \n\t\t}, 'ctx did not load', 300);\n\t});\n\n\tafterEach(function() {\n\n\t});\n\n\tit ('should be able to load', function() {\n\n\t\truns(function() {\n\t\t\t//normal\t\n\t\t\tvar textInput = topApp.item.modules['childmod0'].item; \n\t\t\tvar text = topApp.item.modules['childmod1'].item; \n\t\t\t\n\t\t\texpect(textInput.element.value).toEqual('goodbye');\n\t\t\texpect(text.element.innerHTML).toEqual('10goodbye');\n\n\t\t});\n\t});\n\n\tit ('should be able to respond and set', function() {\n\n\t\tvar textInput = topApp.item.modules['childmod0'].item; \n\t\tvar text = topApp.item.modules['childmod1'].item; \n\t\t\n\t\tvar returned = false;\n\t\truns(function() {\n\t\t\t\n\t\t  var originInfo = textInput.getOriginInfo('model');\n\t\t  var data = new pebble.Pebble();\n\t\t  data.setValue('.', 'hello');\n\t\t\tspyOn(text, 'setClass').andCallThrough();\n\t\t  originInfo.set(data, null, false, function () {\n\t\t\t  returned = true;\t\n\t\t\t});\t\n\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\treturn returned;\t \n\t\t}, 'did not load', 300);\n\n\t\truns(function() {\n\t\t\texpect(text.setClass).toHaveBeenCalled();\n\t\t\texpect(text.setClass.calls.length).toEqual(1);\n\t\t\texpect(text.element.className).toEqual('active');\n\n\t\t});\n\t});\n\n});\n\n\n"},{"key":"path","val":"frontend/test/controls/ExpressionManager.js"},{"key":"ext","val":"js"}]},{"key":"FileInputCSV","val":[{"key":"inherits","attr":{"ref":"theModel.clientWorkspace.libs.standard.controls.ClientControl"}},{"key":"fields","val":[{"key":"model","val":[{"key":"name","val":"anything"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}}]}]}]},{"key":"FileInputImage","val":[{"key":"inherits","attr":{"ref":"theModel.clientWorkspace.libs.standard.controls.ClientControl"}},{"key":"fields","val":[{"key":"model","val":[{"key":"name","val":"anything"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}}]}]}]},{"key":"FileInputPebble","val":[{"key":"inherits","attr":{"ref":"theModel.clientWorkspace.libs.standard.controls.ClientControl"}},{"key":"fields","val":[{"key":"model","val":[{"key":"name","val":"anything"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}}]}]}]},{"key":"FileInputText","val":[{"key":"inherits","attr":{"ref":"theModel.clientWorkspace.libs.standard.controls.ClientControl"}},{"key":"fields","val":[{"key":"model","val":[{"key":"name","val":"anything"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}}]}]}]},{"key":"InnerMarkupManager","val":[{"key":"testCode","val":"describe('InnerMarkupManager', function () {\n\n\n\tvar o, ele;\n\tbeforeEach(function() {\n\t\tele = document.createElement('div');\n\t\to = new pebble.libs.standard.InnerMarkupManager();\n\t});\n\n\tit ('can bind to inner text', function() {\n\t\tvar innerMarkup = new pebble.Pebble('innerMarkup');\n\t\tinnerMarkup.setValue('div', '{{path.to.data}}');\n\t\tinnerMarkup.setAttribute('div', 'class', 'aaa bbb');\n\n\t\tvar component = o._hookInnerHtml(innerMarkup, ele, null);\n\t\tvar points = component.points['path.to.data'];\n\t\texpect(points).toBeDefined();\n\t\texpect(points.length).toEqual(1);\n\t\tvar el = component.elements['0'];\n\t\texpect(el).not.toBeNull();\n\t\texpect(el.tagName.toUpperCase()).toEqual('DIV');\n\t});\n\n\tit ('can bind to multiple items in inner text', function() {\n\t\tvar innerMarkup = new pebble.Pebble('innerMarkup');\n\t\tinnerMarkup.setValue('div', 'blah blah {{path.to.data}} blah blah {{another.path}}');\n\t\tvar component = o._hookInnerHtml(innerMarkup, ele, null);\n\t\tvar points1 = component.points['path.to.data'];\n\t\tvar points2 = component.points['another.path'];\n\t\texpect(points1.length).toEqual(1);\n\t\texpect(points2.length).toEqual(1);\n\t});\n\t\n\tit ('can bind to both inner text and property', function() {\n\t\tvar innerMarkup = new pebble.Pebble('innerMarkup');\n\t\tinnerMarkup.setValue('div', '{{path.to.data}}');\n\t\tinnerMarkup.setAttribute('div', 'title', '{{path.to.data}}');\n\t\tvar component = o._hookInnerHtml(innerMarkup, ele, null);\n\t\tvar points = component.points['path.to.data'];\n\t\texpect(points).toBeDefined();\n\t\texpect(points.length).toEqual(2);\n\t\texpect(component.elements['0']).not.toBeNull();\n\t});\n\n\tit ('can bind to multiple items in on property', function() {\n\t\tvar innerMarkup = new pebble.Pebble('innerMarkup');\n\t\tinnerMarkup.setValue('div','{{path.to.data}}'); \n\t\tinnerMarkup.setAttribute('div', 'title', 'something-before{{path.to.data}}something-after{{path.to.data}}blah');\n\t\tvar component = o._hookInnerHtml(innerMarkup, ele, null);\n\t\tvar points = component.points['path.to.data'];\n\t\texpect(points).toBeDefined();\n\t\texpect(points.length).toEqual(3);\n\t\texpect(component.elements['0']).not.toBeNull();\n\t});\n\t\n\tit ('can find custom controls', function() {\n\t\tvar innerMarkup = new pebble.Pebble('innerMarkup');\n\t\tinnerMarkup.setValue('span', 'blah');\n\t\tinnerMarkup.setAttribute('control', 'id', 'id');\n\t\tvar component = o._hookInnerHtml(innerMarkup, ele, null);\n\t\texpect(component.childMods['id']).not.toBeNull();\n\t});\n\n\tit ('will ignore nested items (ie. in a container)', function() {\n\t\tvar innerMarkup = new pebble.Pebble('innerMarkup');\n\t\tinnerMarkup.setAttribute('div.control.model.a0.control', 'id', 'id1');\n\t\tinnerMarkup.setAttribute('div.control', 'id', 'id');\n\t\tinnerMarkup.setAttribute('div.control', 'k', 'aaa.bbb');\n\t\tinnerMarkup.setAttribute('div.onclick', '{{path.to.data}}');\n\t\tvar component = o._hookInnerHtml(innerMarkup, ele, null);\n\t\texpect(component.childMods['id']).not.toBeNull();\n\t\texpect(component.childMods['id1']).not.toBeDefined();\n\t\texpect(component.elements['id']).not.toBeNull();\n\t});\n\n\tit ('can find multiple custom controls', function() {\n\t\tvar innerMarkup = new pebble.Pebble('innerMarkup');\n\t\tinnerMarkup.setAttribute('div.control.model.a0.control', 'id1', 'id');\n\t\tinnerMarkup.setAttribute('div.control', 'id', 'id');\n\t\tinnerMarkup.setAttribute('div', 'onclick', '{{path.to.data}}');\n\n\t\tvar div2 = new pebble.Pebble('div');\n\t\tdiv2.setAttribute('control', 'id', 'id3');\n\t\tinnerMarkup.add('.', div2);\n\n\t\tvar component = o._hookInnerHtml(innerMarkup, ele, null);\n\t\texpect(component.childMods['id']).not.toBeNull();\n\t\texpect(component.childMods['id3']).not.toBeNull();\n\t});\n\n\tit ('can handle multiple properties', function() {\n\t\tvar innerMarkup = new pebble.Pebble('innerMarkup');\n\t\tinnerMarkup.setAttribute('div', 'class', '{{listCss.class}}');\n\t\tinnerMarkup.setAttribute('div', 'style', '\\'white-space:nowrap;\\'');\n\t\tinnerMarkup.setAttribute('div', 'wins', '{{model}}');\n\t\tvar component = o._hookInnerHtml(innerMarkup, ele, null);\n\t});\n\n\tit ('can bind with no tags', function() {\n\t\tvar innerMarkup = new pebble.Pebble('innerMarkup');\n\t\tinnerMarkup.setValue('.', '{{path.to.data}}');\n\t\tvar component = o._hookInnerHtml(innerMarkup, ele, null);\n\t\tvar points = component.points['path.to.data'];\n\t\texpect(points).toBeDefined();\n\t\texpect(points.length).toEqual(1);\n\t\tvar el = component.elements['0'];\n\t\texpect(el).not.toBeNull();\n\t});\n\n\n});\n\n\n"},{"key":"path","val":"frontend/test/controls/InnerMarkupManager.js"},{"key":"ext","val":"js"}]},{"key":"Markup","val":[{"key":"description"},{"key":"inherits","attr":{"ref":"theModel.clientWorkspace.libs.standard.controls.ClientControl"}},{"key":"fields","val":[{"key":"model","val":[{"key":"name","val":"markup"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.markup"}}]}]}]},{"key":"Panel","val":[{"key":"description","VAL_CDATA":" panel."},{"key":"inherits","attr":{"ref":"theModel.clientWorkspace.libs.standard.controls.ClientControl"}},{"key":"fields","val":[{"key":"model","val":[{"key":"name","val":"displayControl"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.displayControl"}}]}]}]},{"key":"PeerConnectionBase","val":[{"key":"description","VAL_CDATA":"Base for controls handling signaling for rtc."},{"key":"fields","val":[{"key":"model","val":[{"key":"name","val":"rtc"},{"key":"description","VAL_CDATA":"rtc."},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.rtc"}}]}]},{"key":"inherits","attr":{"ref":"theModel.clientWorkspace.libs.standard.controls.ClientControl"}}]},{"key":"Reference","val":[{"key":"description"},{"key":"fields","val":[{"key":"model","val":[{"key":"name","val":"reference"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.itemRelRef"}}]},{"key":"onSelected","val":[{"key":"name","val":"onSelected"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.function"}}]},{"key":"innerArray","val":[{"key":"name","val":"innerArray"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.array"}}]}]},{"key":"inherits","attr":{"ref":"theModel.clientWorkspace.libs.standard.controls.ClientControl"}},{"key":"testCode","val":"\nvar topApp;\n\ndescribe('testReference', function () {\n\n\tfunction getBaseInnerMarkup(bindPoint) {\n\t\tvar ref = new pebble.Pebble();\n\t\tref.setRef('.', 'standard:Reference');\n\t\tref.setRef('model._bind', bindPoint);\n\t\t\n\t\tref.setRef('onSelected.exec', 'this.save');\n\n\t\tvar arraySelect = new pebble.Pebble();\n\t\tarraySelect.setRef('.', 'standard:ArraySelect');\n\n\t\tif (bindPoint == 'testItem.referenceExternal') {\n\t\t\tarraySelect.setRef('loadQuery', 'SERVER.testItems');\n\t\t}\n\n\t\tarraySelect.set('childElement.option', new pebble.Pebble());\n\t\tarraySelect.setRef('displayControl.innerMarkup.control', 'standard:Text');\n\t\tarraySelect.set('displayControl.innerMarkup.control.dummy', new pebble.Pebble());\n\n\t\tref.set('innerArrayControl.innerMarkup.select.control', arraySelect);\n\t\t\n\t\tvar div1 = new pebble.Pebble('div');\n\t\tdiv1.set('control', ref);\n\n\t\tvar innerMarkup = new pebble.Pebble();\n\t\tinnerMarkup.add('.', div1);\n\n\t\tvar div2 = new pebble.Pebble('div');\n\t\tvar refTextBox = new pebble.Pebble();\n\t\trefTextBox.setRef('.', 'standard:ReferenceTextInput');\n\t\trefTextBox.setRef('model._bind', 'testItem.referenceEmbedded');\n\t\tdiv2.set('control', refTextBox);\n\n\t\tinnerMarkup.add('.', div2);\n\n\t\treturn innerMarkup;\n\t}\n\n\tit ('requires deployment and testAppControl', function() {\n\t\tvar ready = false;\n\t\truns(function() {\n\t\t\tgetDeployment(function(depObj) {\n\t\t\t\ttopApp && topApp.kill();\n\t\t\t\ttopApp = new pebble.libs.standard.TopModule(document.createElement('div'), depObj, 'top');\n\t\t\t\ttopApp.load(function() {\n\t\t\t\t\tready = true;\t\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn ready;\n\t\t}, 'wait for deployment and testAppControl', 300);\n\n\t});\n\n\tit ('referenceEmbedded', function() {\n\n\t\tvar innerMarkup = getBaseInnerMarkup('testItem.referenceEmbedded');\t\n\t\tvar dm = topApp.item;\n\n\t\tdm.set('innerMarkup', innerMarkup);\n\t\tdm.setRef('testItem.referenceEmbedded', 'a3');\n\n\t\truns(function() {\n\t\t\ttopApp.item.loadManager.ctxLoaded = false;\n\t\t\ttopApp.getItem(dm);\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn topApp.item.loadManager.ctxLoaded;\t \n\t\t}, 'ctx did not load', 300);\n\n\t\tvar loaded = false;\n\t\truns(function() {\n\t\t\tvar ctrl = topApp.item.modules['childmod0'].item; \n\t\t\tvar refTextBox = topApp.item.modules['childmod1'].item; \n\t\t\texpect(ctrl.getRecords('innerArray').length).toEqual(5);\n\t\t\texpect(ctrl.getBool('innerArray.a3._selection.default.selected')).toEqual(true);\n\n\t\t\tctrl.innerArrayControl.element.selectedIndex = 4;\n\n\t\t\tsetTimeout(function() {\n\t\t\t\tloaded = true;\n\t\t\t}, 100);\n\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\treturn loaded;\t \n\t\t}, 'ctx did not load', 300);\n\t\t\n\t\truns(function() {\n\t\t\tvar ctrl = topApp.item.modules['childmod0'].item; \n\t\t\tvar refTextBox = topApp.item.modules['childmod1'].item; \n\t\t\texpect(ctrl.getOriginInfo('model').getRef()).toEqual('a3');\n\t\t\texpect(refTextBox.getOriginInfo('model').getRef()).toEqual('a3');\n\t\t});\n\t});\n\n\tit ('referenceExternal', function() {\n\n\t\tvar innerMarkup = getBaseInnerMarkup('testItem.referenceExternal');\t\n\t\tvar dm = topApp.item;\n\t\tdm.set('innerMarkup', innerMarkup);\n\t\tdm.setRef('testItem.referenceExternal', 'a1');\n\n\t\truns(function() {\n\t\t\ttopApp.item.loadManager.ctxLoaded = false;\n\t\t\ttopApp.getItem(dm);\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn topApp.item.loadManager.ctxLoaded;\t \n\t\t}, 'ctx did not load', 300);\n\n\t\truns(function() {\n\t\t\tvar ctrl = topApp.item.modules['childmod0'].item; \n\t\t\t//expect(ctrl.getRecords('innerArray').length).toEqual(10);\n\t\t\texpect(ctrl.getBool('innerArray.a1._selection.default.selected')).toEqual(true);\n\t\t});\n\t});\n\n\tit ('referenceExternalDynControl', function() {\n\n\t\tvar innerMarkup = getBaseInnerMarkup('testItem.referenceExternal');\t\n\n\t\tvar div = new pebble.Pebble('div');\n\t\tvar dynControl = new pebble.Pebble();\n\t\tdynControl.setRef('.', 'standard:DynControl');\n\t\tdynControl.setRef('model._bind', 'testItem.referenceExternal');\n\t\tdiv.set('control', dynControl);\n\n\t\tinnerMarkup.add('.', div);\n\n\t\tvar dm = topApp.item;\n\t\tdm.set('innerMarkup', innerMarkup);\n\t\tdm.setRef('testItem.referenceExternal', 'a1');\n\n\t\truns(function() {\n\t\t\ttopApp.item.loadManager.ctxLoaded = false;\n\t\t\ttopApp.getItem(dm);\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn topApp.item.loadManager.ctxLoaded;\t \n\t\t}, 'ctx did not load', 300);\n\n\t\truns(function() {\n\t\t\tvar ctrl = topApp.item.modules['childmod0'].item; \n\t\t\t//expect(ctrl.getRecords('innerArray').length).toEqual(10);\n\t\t\texpect(ctrl.getBool('innerArray.a1._selection.default.selected')).toEqual(true);\n\t\t});\n\t});\n});\n\n\n"},{"key":"path","val":"frontend/test/controls/Reference.js"},{"key":"ext","val":"js"}]},{"key":"ReferenceArray","val":[{"key":"description"},{"key":"fields"},{"key":"inherits","attr":{"ref":"theModel.clientWorkspace.libs.standard.controls.ArrayTreeBase"}}]},{"key":"ReferenceTextInput","val":[{"key":"description"},{"key":"inherits","attr":{"ref":"theModel.clientWorkspace.libs.standard.controls.ClientControl"}},{"key":"fields","val":[{"key":"model","val":[{"key":"name","val":"markup"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.itemRelRef"}}]}]}]},{"key":"RichTextEditor","val":[{"key":"description","VAL_CDATA":"Rich Text Area enables a editable content area. "},{"key":"inherits","attr":{"ref":"theModel.clientWorkspace.libs.standard.controls.ClientControl"}},{"key":"fields","val":[{"key":"model","val":[{"key":"name","val":"markup"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.markup"}}]},{"key":"onKeyUp","val":[{"key":"name","val":"onKeyUp"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.function"}}]}]}]},{"key":"StackPanel","val":[{"key":"description","VAL_CDATA":" Displays one module at a time.  "},{"key":"inherits","attr":{"ref":"theModel.clientWorkspace.libs.standard.controls.ArrayTreeBase"}},{"key":"fields","val":[{"key":"model","val":[{"key":"name","val":"model"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.array"},"val":[{"key":"arrayFormId","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.win"}}]}]},{"key":"animationDuration","val":[{"key":"name","val":"animationDuration"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.number"}}]}]},{"key":"testCode","val":"\nvar topApp;\n\ndescribe('testStackPanel', function () {\n\n\tfunction getBaseInnerMarkup() {\n\t\tvar text1 = new pebble.Pebble();\n\t\ttext1.setRef('.', 'standard:Text');\n\t\ttext1.set('dummy', new pebble.Pebble());\n\n\t\tvar text2 = new pebble.Pebble();\n\t\ttext2.setRef('.', 'standard:Text');\n\t\ttext2.set('dummy', new pebble.Pebble());\n\n\t\tvar sp = new pebble.Pebble();\n\t\tsp.setRef('.', 'standard:StackPanel');\n\t\tsp.set('model.text1.innerMarkup.div.control', text1);\n\t\tsp.set('model.text2.innerMarkup.div.control', text2);\n\n\t\tvar innerMarkup = new pebble.Pebble();\n\t\tinnerMarkup.set('control', sp);\n\n\t\treturn innerMarkup;\n\t}\n\n\tfunction getNestedStackPanel() {\n\t\tvar text1 = new pebble.Pebble();\n\t\ttext1.setRef('.', 'standard:Text');\n\t\ttext1.set('dummy', new pebble.Pebble());\n\n\t\tvar text2 = new pebble.Pebble();\n\t\ttext2.setRef('.', 'standard:Text');\n\t\ttext2.set('dummy', new pebble.Pebble());\n\n\t\tvar sp = new pebble.Pebble();\n\t\tsp.setRef('.', 'standard:StackPanel');\n\t\tsp.set('model.text1.innerMarkup.div.control', text1);\n\t\tsp.set('model.text2.innerMarkup.div.control', text2);\n\t\t\n\t\tvar topSp = new pebble.Pebble();\n\t\ttopSp.setRef('.', 'standard:StackPanel');\n\t\ttopSp.set('model.sp.innerMarkup.div.control', sp);\n\n\t\tvar innerMarkup = new pebble.Pebble();\n\t\tinnerMarkup.set('control', topSp);\n\n\t\treturn innerMarkup;\n\t}\n\n\n\tit ('requires deployment and testAppControl', function() {\n\t\tvar ready = false;\n\t\truns(function() {\n\t\t\tgetDeployment(function(depObj) {\n\t\t\t\ttopApp && topApp.kill();\n\t\t\t\ttopApp = new pebble.libs.standard.TopModule(document.createElement('div'), depObj, 'top');\n\t\t\t\ttopApp.load(function() {\n\t\t\t\t\tready = true;\t\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn ready;\n\t\t}, 'wait for deployment and testAppControl', 300);\n\n\t});\n\n\tit ('should not load it children unless specified to', function() {\n\n\t\tvar innerMarkup = getBaseInnerMarkup();\t\n\t\tvar dm = topApp.item;\n\t\tdm.set('innerMarkup', innerMarkup);\n\n\t\truns(function() {\n\t\t\ttopApp.item.loadManager.ctxLoaded = false;\n\t\t\ttopApp.getItem(dm);\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn topApp.item.loadManager.ctxLoaded;\t \n\t\t}, 'ctx did not load', 300);\n\n\t\truns(function() {\n\t\t\tvar stackPanel = topApp.item.modules['childmod0'].item; \n\t\t\texpect(Object.keys(topApp.item.loadManager.cCMs).length).toEqual(1); //all mods should report to top\n\t\t\texpect(Object.keys(stackPanel.modules).length).toEqual(0); \n\n\t\t\tvar ctxs = topApp.item.getChildCtxs([], 'bot2Top', true, true);\n\t\t\texpect(ctxs.length).toEqual(1);\n\t\t\tvar ctxs = topApp.item.getChildCtxs([], 'bot2Top', true, false);\n\t\t\texpect(ctxs.length).toEqual(0);\n\t\t});\n\t});\n\n\tit ('should load child specified by initModule', function() {\n\n\t\tvar innerMarkup = getBaseInnerMarkup();\t\n\t\tinnerMarkup.setRef('control.initModule', 'text2');\n\n\t\tvar dm = topApp.item;\n\t\tdm.set('innerMarkup', innerMarkup);\n\n\n\t\truns(function() {\n\t\t\ttopApp.item.loadManager.ctxLoaded = false;\n\t\t\ttopApp.getItem(dm);\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn topApp.item.loadManager.ctxLoaded;\t \n\t\t}, 'ctx did not load', 300);\n\n\t\truns(function() {\n\t\t\tvar stackPanel = topApp.item.modules['childmod0'].item;//auto created list container \n\t\t\texpect(Object.keys(topApp.item.loadManager.cCMs).length).toEqual(3); //all mods should report to top\n\t\t\texpect(Object.keys(stackPanel.modules).length).toEqual(1); \n\n\t\t\tvar ctxs = topApp.item.getChildCtxs([], 'bot2Top', true, true);\n\t\t\texpect(ctxs.length).toEqual(3);\n\t\t\tvar ctxs = topApp.item.getChildCtxs([], 'bot2Top', true, false);\n\t\t\texpect(ctxs.length).toEqual(1);\n\t\t});\n\t});\n\n\tit ('should load child by setSelectedItem as top', function() {\n\n\t\tvar stackPanel = topApp.item.modules['childmod0'].item; \n\t\truns(function() {\n\t\t\tstackPanel.setSelectedItem('text1');\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn stackPanel.modules['text1'] && stackPanel.modules['text1'].item && stackPanel.modules['text1'].item.loadManager.ctxLoaded;\n\t\t}, 'ctx did not load', 300);\n\n\t\truns(function() {\n\t\t\texpect(Object.keys(stackPanel.modules).length).toEqual(2); \n\n\t\t\t//the top now has 3 child ctx\n\t\t\tvar ctxs = topApp.item.getChildCtxs([], 'bot2Top', true, true);\n\t\t\texpect(ctxs.length).toEqual(5);\n\t\t\n\t\t});\n\t});\n\t//it ('should not load it children unless specified to (nestedStackPanel)', function() {\n\n\t\t//var innerMarkup = getNestedStackPanel();\t\n\t\t//var dm = topApp.item;\n\t\t//dm.set('innerMarkup', innerMarkup);\n\n\t\t//runs(function() {\n\t\t\t//topApp.item.loadManager.ctxLoaded = false;\n\t\t\t//topApp.getItem(dm);\n\t\t//});\n\n\t\t//waitsFor(function() {\n\t\t\t//return topApp.item.loadManager.ctxLoaded;\t \n\t\t//}, 'ctx did not load', 300);\n\n\t\t//runs(function() {\n\t\t\t//expect(Object.keys(topApp.item.loadManager.cCMs).length).toEqual(1); //only top sp should be there\n\t\t\t//var topStackPanel = topApp.item.modules['childmod0'].item; \n\t\t\t//expect(Object.keys(topStackPanel.modules).length).toEqual(0); \n\n\t\t\t//topStackPanel.setSelectedItem('sp', function() {\n\t\t\t\t\n\t\t\t\t//var stackPanel = topStackPanel.modules['sp'];\n\t\t\t\t//expect(Object.keys(stackPanel.modules).length).toEqual(0); \n\t\t\t\t//expect(Object.keys(topStackPanel.cCMs).length).toEqual(1);  //note the child sp does not register to pCM but rather topStackPanel (via proxyToContainerLoadTop)\n\t\t\t//});\n\t\t//});\n\t//});\n\n});\n\n\n"},{"key":"path","val":"frontend/test/controls/StackPanel.js"},{"key":"ext","val":"js"}]},{"key":"Template","val":[{"key":"inherits","attr":{"ref":"theModel.clientWorkspace.libs.standard.controls.ClientControl"}},{"key":"fields","val":[{"key":"model","val":[{"key":"name","val":"anything"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}}]},{"key":"template","val":[{"key":"name","val":"template"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.markup"}}]}]}]},{"key":"TestArrayLocalFilter","val":[{"key":"testCode","val":"/**\n * test local filter \n * \n * test filters, filters on searchText change\n *\n * test pages set\n *\n * test page changed on page selection\n */\n\nvar topApp, returned, ctrl1, ctrl2, ctrl3;\n\ndescribe('testArrayLocalFilter', function () {\n\n\tfunction getInnerMarkup(bindPoint) {\n\t\tvar ctrl1 = new pebble.Pebble();\n\t\tctrl1.setRef('.', 'standard:ArrayControl');\n\t\tctrl1.setRef('model._bind', bindPoint);\n\t\t\n\t\tvar control1 = new pebble.Pebble();\n\t\tcontrol1.setRef('.', 'standard:TextInput');\n\t\t//control1.setRef('model._bind', 'model');\n\t\t\n\t\tvar embData = new pebble.Pebble();\n\t\tembData.setValue('a0.text', 'embData0');\n\t\tembData.setValue('a1.text', 'embData1');\n\t\tembData.setValue('a2.text', 'embData2');\n\t\tembData.setValue('a3.text', 'embData3');\n\t\tembData.setValue('a4.text', 'embData4');\n\n\t\tctrl1.set('model', embData);\n\n\t\tvar displayControl1 = new pebble.Pebble();\n\t\tdisplayControl1.setRef('mapPath', 'text');\n\t\tdisplayControl1.set('innerMarkup.control', control1);\n\n\t\tctrl1.set('childElement.input', new pebble.Pebble());\n\t\tctrl1.setAttribute('childElement.input', 'type', 'text');\n\t\tctrl1.set('displayControl', displayControl1);\n\t\tctrl1.setRef('triggers.trig', 'this.applyLocalFilter');\n\t\tctrl1.setValue('triggers.trig.showRecsFilter', '{{\"item.text\".indexOf(ctx.searchText) == 0}}'); \n\t\t//ctrl1.setValue('triggers.trig.showRecsFilter', '{{\"item.text\" == ctx.searchText}}'); \n\n\t\tvar filter1 = new pebble.Pebble();\n\t\tfilter1.setValue('.', '{{\"item.text\" == \"embData0\" || \"item.text\" == \"embData2\"}}');\n\t\tctrl1.set('showRecsFilter', filter1);\n\n\t\tvar div1 = new pebble.Pebble('div');\n\t\tdiv1.set('control', ctrl1);\n\n\t\tvar innerMarkup = new pebble.Pebble();\n\t\tinnerMarkup.add('.', div1);\n\n\t\tvar ctrl2 = new pebble.Pebble();\n\t\tctrl2.setRef('.', 'standard:ArrayControl');\n\t\tctrl2.setRef('model._bind', bindPoint);\n\t\t\n\t\tvar displayControl2 = new pebble.Pebble();\n\t\tdisplayControl2.setValue('innerMarkup', '{{item.text}}');\n\n\t\tctrl2.set('childElement.div', new pebble.Pebble());\n\t\tctrl2.set('displayControl', displayControl2);\n\n\t\tvar filter2 = new pebble.Pebble();\n\t\tfilter2.setValue('.', '{{item._selection.groupB.selected}}');\n\t\tctrl2.set('showRecsFilter', filter2);\n\n\t\tvar div2 = new pebble.Pebble('div');\n\t\tdiv2.set('control', ctrl2);\n\n\t\tinnerMarkup.add('.', div2);\n\n\t\t//searchbox\n\t\tvar ctrl3 = new pebble.Pebble();\n\t\tctrl3.setAttribute('.', 'id', 'searchBox');\n\t\tctrl3.setRef('.', 'standard:TextInput');\n\t\tctrl3.setRef('model._bind', 'searchText');\n\n\t\tvar div3 = new pebble.Pebble('div');\n\t\tdiv3.set('control', ctrl3);\n\n\t\tinnerMarkup.add('.', div3);\n\n\t\treturn innerMarkup;\n\t}\n\n\tbeforeEach(function() {\n\n\t\tvar ready = false;\n\t\truns(function() {\n\t\t\tgetDeployment(function(depObj) {\n\t\t\t\ttopApp && topApp.kill();\n\t\t\t\ttopApp = new pebble.libs.standard.TopModule(document.createElement('div'), depObj, 'top');\n\t\t\t\ttopApp.load(function() {\n\n\t\t\t\t\tvar innerMarkup = getInnerMarkup('model.testEmbItems');\t\n\t\t\t\t\tvar dm = topApp.item;\n\n\t\t\t\t\tdm.set('innerMarkup', innerMarkup);\n\n\t\t\t\t\truns(function() {\n\t\t\t\t\t\ttopApp.item.loadManager.ctxLoaded = false;\n\t\t\t\t\t\ttopApp.getItem(dm, function() {\n\n\t\t\t\t\t\t\tctrl1 = topApp.item.modules['childmod0'].item; \n\t\t\t\t\t\t\tctrl2 = topApp.item.modules['childmod1'].item; \n\t\t\t\t\t\t\tctrl3 = topApp.item.getModById('searchBox').item; \n\t\t\t\t\t\t\tready = ctrl1 && ctrl2 && ctrl3;\t\n\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn ready;\n\t\t}, 'wait for deployment and testAppControl', 300);\n\n\t});\n\n\t\n\tit ('should apply filter (showRecsFilter) on load and trigger filter on condition change', function() {\n\t\t\n\t\tvar returned1, returned2;\n\n\t\truns(function() {\n\n\t\t\texpect(ctrl1.showRecs.length).toEqual(2);\n\t\t\texpect(ctrl2.showRecs.length).toEqual(0);\n\t\t\t\n\t\t\tspyOn(ctrl1, 'applyLocalFilter').andCallThrough();\n\t\t\t\n\t\t\tvar data = new pebble.Pebble();\n\t\t\tdata.setValue('.', 'embData2');\n\n\t\t\treturned = false;\n\t\t\tctrl3.getOriginInfo('model').set(data, null, false, function() {\n\t\t\t\treturned = true;\n\t\t\t});\n\t\t\t\t\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\treturn returned;\t \n\t\t}, 'ctx did not load', 300);\n\n\t\truns(function() {\n\n\t\t\texpect(ctrl1.applyLocalFilter).toHaveBeenCalled();\n\t\t\texpect(ctrl1.applyLocalFilter.calls.length).toEqual(1);\n\n\t\t\texpect(ctrl1.showRecs.length).toEqual(1);\n\n\t\t});\n\t});\n\n\n});\n\n\n"},{"key":"path","val":"frontend/test/controls/TestArrayLocalFilter.js"},{"key":"ext","val":"js"}]},{"key":"TestArrayPages","val":[{"key":"testCode","val":"\nvar topApp, returned, ctrl1, ctrl2, ctrl3;\n\ndescribe('testArrayPages', function () {\n/**\n * test array pages\n * \n * test filters, filters on searchText change\n *\n * test pages set\n *\n * test page changed on page selection\n */\n\n\t\tvar embData = new pebble.Pebble();\n\t\tembData.setValue('a0.text', 'embData0');\n\t\tembData.setValue('a1.text', 'embData1');\n\t\tembData.setValue('a2.text', 'embData2');\n\t\tembData.setValue('a3.text', 'embData3');\n\t\tembData.setValue('a4.text', 'embData4');\n\t\tembData.setValue('a5.text', 'embData5');\n\t\tembData.setValue('a6.text', 'embData6');\n\t\tembData.setValue('a7.text', 'embData7');\n\t\tembData.setValue('a8.text', 'embData8');\n\t\tembData.setValue('a9.text', 'embData9');\n\t\tembData.setValue('a10.text', 'embData10');\n\t\tembData.setValue('a11.text', 'embData11');\n\t\tembData.setValue('a12.text', 'embData12');\n\t\tembData.setValue('a13.text', 'embData13');\n\t\tembData.setValue('a14.text', 'embData14');\n\t\tembData.setValue('a15.text', 'embData15');\n\t\tembData.setValue('a16.text', 'embData16');\n\t\tembData.setValue('a17.text', 'embData17');\n\t\tembData.setValue('a18.text', 'embData18');\n\t\tembData.setValue('a19.text', 'embData19');\n\t\tembData.setValue('a20.text', 'embData20');\n\t\tembData.setValue('a21.text', 'embData21');\n\t\tembData.setValue('a22.text', 'embData22');\n\t\tembData.setValue('a23.text', 'embData23');\n\t\tembData.setValue('a24.text', 'embData24');\n\t\tembData.setValue('a25.text', 'embData25');\n\t\tembData.setValue('a26.text', 'embData26');\n\t\tembData.setValue('a27.text', 'embData27');\n\t\tembData.setValue('a28.text', 'embData28');\n\t\tembData.setValue('a29.text', 'embData29');\n\t\tembData.setValue('a30.text', 'embData30');\n\t\tembData.setValue('a31.text', 'embData31');\n\t\tembData.setValue('a32.text', 'embData32');\n\t\tembData.setValue('a33.text', 'embData33');\n\t\tembData.setValue('a34.text', 'embData34');\n\t\tembData.setValue('a35.text', 'embData35');\n\t\tembData.setValue('a36.text', 'embData36');\n\t\tembData.setValue('a37.text', 'embData37');\n\t\tembData.setValue('a38.text', 'embData38');\n\t\tembData.setValue('a39.text', 'embData39');\n\t\tembData.setValue('a40.text', 'embData40');\n\t\tembData.setValue('a41.text', 'embData41');\n\n\tfunction getInnerMarkup() {\n\n\t\tvar pagesBindPoint = \"pages\";\n\n\t\tvar ctrl1 = new pebble.Pebble();\n\t\tctrl1.setRef('.', 'standard:ArrayControl');\n\t\tctrl1.setRef('model._bind', \"memoryArray\");\n\t\tctrl1.setRef('arrayPages_._bind', pagesBindPoint);\n\t\tctrl1.setValue('itemsPerPage', 5);\n\t\t\n\t\tvar control1 = new pebble.Pebble();\n\t\tcontrol1.setRef('.', 'standard:TextInput');\n\n\t\tctrl1.set('model', embData);\n\n\t\tvar displayControl1 = new pebble.Pebble();\n\t\tdisplayControl1.setRef('mapPath', 'text');\n\t\tdisplayControl1.set('innerMarkup.control', control1);\n\n\t\tctrl1.set('childElement.input', new pebble.Pebble());\n\t\tctrl1.setAttribute('childElement.input', 'type', 'text');\n\t\tctrl1.set('displayControl', displayControl1);\n\t\t//ctrl1.setRef('triggers.trig', 'this.applyLocalFilter');\n\t\t//ctrl1.setValue('triggers.trig.showRecsFilter', '{{\"item.text\".indexOf(ctx.searchText) == 0}}'); \n\t\t//ctrl1.setValue('triggers.trig.showRecsFilter', '{{\"item.text\" == ctx.searchText}}'); \n\n\t\t//var filter1 = new pebble.Pebble();\n\t\t//filter1.setValue('.', '{{\"item.text\" == \"embData0\" || \"item.text\" == \"embData2\"}}');\n\t\t//ctrl1.set('showRecsFilter', filter1);\n\n\t\tvar div1 = new pebble.Pebble('div');\n\t\tdiv1.set('control', ctrl1);\n\n\t\tvar innerMarkup = new pebble.Pebble();\n\t\tinnerMarkup.add('.', div1);\n\n\t\tvar ctrl2 = new pebble.Pebble();\n\t\tctrl2.setAttribute('.', 'id', 'pageControl');\n\t\tctrl2.setRef('.', 'standard:ArrayControl');\n\t\tctrl2.setRef('model._bind', pagesBindPoint);\n\t\t\n\t\tvar displayControl2 = new pebble.Pebble();\n\t\tdisplayControl2.setValue('innerMarkup', '{{item.pageNumber}}');\n\n\t\tctrl2.set('childElement.div', new pebble.Pebble());\n\t\tctrl2.set('displayControl', displayControl2);\n\n\t\tvar div2 = new pebble.Pebble('div');\n\t\tdiv2.set('control', ctrl2);\n\n\t\tinnerMarkup.add('.', div2);\n\n\t\t//searchbox\n\t\tvar ctrl3 = new pebble.Pebble();\n\t\tctrl3.setAttribute('.', 'id', 'searchBox');\n\t\tctrl3.setRef('.', 'standard:TextInput');\n\t\tctrl3.setRef('model._bind', 'searchText');\n\n\t\tvar div3 = new pebble.Pebble('div');\n\t\tdiv3.set('control', ctrl3);\n\n\t\tinnerMarkup.add('.', div3);\n\n\t\treturn innerMarkup;\n\t}\n\n\tbeforeEach(function() {\n\t\t\n\t\tvar ready = false;\n\t\truns(function() {\n\t\t\tgetDeployment(function(depObj) {\n\t\t\t\ttopApp && topApp.kill();\n\t\t\t\ttopApp = new pebble.libs.standard.TopModule(document.createElement('div'), depObj, 'top');\n\t\t\t\ttopApp.load(function() {\n\n\t\t\t\t\tvar innerMarkup = getInnerMarkup();\t\n\t\t\t\t\tvar dm = topApp.item;\n\n\t\t\t\t\tdm.set('innerMarkup', innerMarkup);\n\n\t\t\t\t\ttopApp.item.loadManager.ctxLoaded = false;\n\t\t\t\t\ttopApp.getItem(dm, function() {\n\n\t\t\t\t\t\tctrl1 = topApp.item.modules['childmod0'].item; \n\t\t\t\t\t\tctrl2 = topApp.item.modules['childmod1'].item; \n\t\t\t\t\t\tctrl3 = topApp.item.getModById('searchBox').item; \n\t\t\t\t\t\tready = ctrl1 && ctrl2 && ctrl3;\t\n\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn ready;\n\t\t}, 'wait for deployment and testAppControl', 300);\n\n\t});\n\n\t\n\tit ('should apply filter (showRecsFilter) on load and trigger filter on condition change', function() {\n\t\t\n\t\truns(function() {\n\n\t\t\t//showRecs is the recs from local filter\n\t\t\texpect(ctrl1.showRecs.length).toEqual(42);\n\n\t\t\t//displayed recs\n\t\t\texpect(ctrl1.element.childNodes.length).toEqual(5);\n\n\t\t\t//pages\n\t\t\texpect(ctrl2.showRecs.length).toEqual(9);\n\n\t\t\t//expect first selected on load\n\t\t\texpect(ctrl2.getSingleSelectedMeta()).toEqual('a0');\n\t\t\t\n\t\t\tvar data = new pebble.Pebble();\n\t\t\tdata.setValue('.', 'embData2');\n\n\t\t\treturned = false;\n\n\t\t\t//select 3nd page\n\t\t\tctrl2.setSelectedItem('a8', function() {\n\t\t\t\treturned = true;\n\t\t\t});\n\t\t\t\t\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\treturn returned;\t \n\t\t}, 'ctx did not load', 300);\n\n\t\truns(function() {\n\t\t\t\n\t\t\texpect(ctrl2.getSingleSelectedMeta()).toEqual('a8');\n\t\t\texpect(ctrl1.element.childNodes.length).toEqual(2);\n\n\t\t});\n\t});\n\t\n\tit ('can selectNext and selectPrev', function() {\n\t\t\n\t\tvar returned;\n\n\t\truns(function() {\n\n\t\t\t//showRecs is the recs from local filter\n\t\t\texpect(ctrl1.showRecs.length).toEqual(42);\n\t\t\t\n\t\t\t//displayed recs\n\t\t\texpect(ctrl1.element.childNodes.length).toEqual(5);\n\n\t\t\t//pages\n\t\t\texpect(ctrl2.showRecs.length).toEqual(9);\n\n\t\t\tobj = new pebble.Pebble();\n\t\t\tvar params = obj.getParams();\n\t\t\tparams.setRef('.', 'this.selectNext');\n\t\t\tobj.setCallback(function() {\n\t\t\t\treturned = true;\n\t\t\t});\n\t\t\tctrl2.resolve(obj);\n\t\t\t\t\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\treturn returned;\t \n\t\t}, 'ctx did not load', 300);\n\n\t\truns(function() {\n\t\t\t\n\t\t\texpect(ctrl2.getSingleSelectedMeta()).toEqual('a1');\n\t\t\t\n\t\t\tobj = new pebble.Pebble();\n\t\t\tvar params = obj.getParams();\n\t\t\tparams.setRef('.', 'this.selectPrev');\n\t\t\tobj.setCallback(function() {\n\t\t\t\treturned = true;\n\t\t\t});\n\t\t\tctrl2.resolve(obj);\n\n\t\t});\n\t\twaitsFor(function() {\n\t\t\treturn returned;\t \n\t\t}, 'ctx did not load', 300);\n\n\t\truns(function() {\n\t\t\t\n\t\t\texpect(ctrl2.getSingleSelectedMeta()).toEqual('a0');\n\t\t\t\n\t\t});\n\t});\n\n\tit ('can selectFirst and selectLast', function() {\n\t\t\n\t\tvar returned;\n\n\t\truns(function() {\n\n\t\t\t//showRecs is the recs from local filter\n\t\t\texpect(ctrl1.showRecs.length).toEqual(42);\n\t\t\t\n\t\t\t//displayed recs\n\t\t\texpect(ctrl1.element.childNodes.length).toEqual(5);\n\n\t\t\t//pages\n\t\t\texpect(ctrl2.showRecs.length).toEqual(9);\n\n\t\t\tobj = new pebble.Pebble();\n\t\t\tvar params = obj.getParams();\n\t\t\tparams.setRef('.', 'this.selectLast');\n\t\t\tobj.setCallback(function() {\n\t\t\t\treturned = true;\n\t\t\t});\n\t\t\tctrl2.resolve(obj);\n\t\t\t\t\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\treturn returned;\t \n\t\t}, 'ctx did not load', 300);\n\n\t\truns(function() {\n\t\t\t\n\t\t\texpect(ctrl2.getSingleSelectedMeta()).toEqual('a8');\n\t\t\t\n\t\t\tobj = new pebble.Pebble();\n\t\t\tvar params = obj.getParams();\n\t\t\tparams.setRef('.', 'this.selectFirst');\n\t\t\tobj.setCallback(function() {\n\t\t\t\treturned = true;\n\t\t\t});\n\t\t\tctrl2.resolve(obj);\n\n\t\t});\n\t\twaitsFor(function() {\n\t\t\treturn returned;\t \n\t\t}, 'ctx did not load', 300);\n\n\t\truns(function() {\n\t\t\t\n\t\t\texpect(ctrl2.getSingleSelectedMeta()).toEqual('a0');\n\n\t\t});\n\t});\n\n});\n\n\n"},{"key":"path","val":"frontend/test/controls/TestArrayPages.js"},{"key":"ext","val":"js"}]},{"key":"TestArrayTreeBaseExternal","val":[{"key":"testCode","val":"\nvar topApp, ctrl1, ctrl2, ctrl3, originInfo;\n\ndescribe('testArrayTreeBaseExternal', function () {\n\n\tbeforeEach(function() {\n\n\t\tvar ready = false;\n\t\truns(function() {\n\t\t\tgetDeployment(function(depObj) {\n\t\t\t\ttopApp && topApp.kill();\n\t\t\t\ttopApp = new pebble.libs.standard.TopModule(document.createElement('div'), depObj, 'top');\n\t\t\t\ttopApp.load(function() {\n\t\t\t\t\tready = true;\t\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn ready;\n\t\t}, 'wait for deployment and testAppControl', 300);\n\n\t\truns(function() {\n\t\t\tvar bindPoint = 'model.testItems';\t\n\n\t\t\t//ArrayCtrl1: main point of changes\n\t\t\tvar ctrl1 = new pebble.Pebble();\n\t\t\tctrl1.setRef('.', 'standard:ArrayTreeBase');\n\t\t\tctrl1.setRef('model._bind', bindPoint);\n\t\t\tctrl1.setRef('crud.create', 'SERVER.createItem');\n\t\t\tctrl1.setRef('crud.update', 'SERVER.updateItem');\n\t\t\tctrl1.setRef('crud.delete', 'SERVER.deleteItem');\n\t\t\tctrl1.setRef('crud.retrieve', 'SERVER.retrieveItem');\n\t\t\tctrl1.setRef('loadQuery', 'SERVER.testItems1');\n\n\t\t\tvar div1 = new pebble.Pebble('div');\n\t\t\tdiv1.set('control', ctrl1);\n\n\t\t\tvar innerMarkup = new pebble.Pebble();\n\t\t\tinnerMarkup.add('.', div1);\n\n\t\t\t//ArrayCtrl2: test how an array reacts to changes\n\t\t\tvar ctrl2 = new pebble.Pebble();\n\t\t\tctrl2.setRef('.', 'standard:ArrayTreeBase');\n\t\t\t//TODO would be nice to have a filter here \n\t\t\tctrl2.setRef('loadQuery', 'SERVER.testItems1');\n\t\t\tctrl2.setRef('model._bind', bindPoint);\n\t\t\tvar div2 = new pebble.Pebble('div');\n\t\t\tdiv2.set('control', ctrl2);\n\t\t\tinnerMarkup.add('.', div2);\n\n\t\t\t//ArrayStackControl\n\t\t\tvar ctrl3 = new pebble.Pebble();\n\t\t\tctrl3.setRef('.', 'standard:ArrayStackControl');\n\t\t\tctrl3.setRef('crud.retrieve', 'SERVER.retrieveItem');\n\t\t\tctrl3.setRef('model._bind', bindPoint);\n\t\t\n\t\t\tvar control = new pebble.Pebble();\n\t\t\tcontrol.setRef('.', 'standard:TextInput');\n\n\t\t\tvar displayControl = new pebble.Pebble();\n\t\t\tdisplayControl.setAttribute('innerMarkup.input', 'type', 'text');\n\t\t\tdisplayControl.set('innerMarkup.input.control', control);\n\n\t\t\tctrl3.set('displayControl', displayControl);\n\n\t\t\tctrl3.set('childElement.div', new pebble.Pebble());\n\n\t\t\tvar div3 = new pebble.Pebble('div');\n\t\t\tdiv3.set('control', ctrl3);\n\t\t\tinnerMarkup.add('.', div3);\n\n\n\t\t\tvar dm = topApp.item;\n\t\t\tdm.set('innerMarkup', innerMarkup);\n\t\t\ttopApp.item.loadManager.ctxLoaded = false;\n\t\t\ttopApp.getItem(dm);\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\tctrl1 = topApp.item.modules['childmod0'].item; \n\t\t\tctrl2 = topApp.item.modules['childmod1'].item; \n\t\t\tctrl3 = topApp.item.modules['childmod2'].item; \n\t\t\toriginInfo = ctrl1.getOriginInfo('model');\n\t\t\treturn topApp.item.loadManager.ctxLoaded;\t \n\t\t}, 'ctx did not load', 300);\n\n\t});\n\n\tit ('check setup is correct', function() {\n\t\truns(function() {\n\t\t\texpect(ctrl1.getRef('.').indexOf('ArrayTreeBase') != -1);\n\t\t\texpect(ctrl2.getRef('.').indexOf('ArrayTreeBase') != -1);\n\t\t\texpect(ctrl3.getRef('.').indexOf('ArrayStackControl') != -1);\n\t\t\texpect(ctrl1.origin.getThisType().getRef('arrayFormId').split('.').pop()).toEqual('testItem');\n\t\t\texpect(ctrl2.origin.getThisType().getRef('arrayFormId').split('.').pop()).toEqual('testItem');\n\t\t\texpect(ctrl3.origin.getThisType().getRef('arrayFormId').split('.').pop()).toEqual('testItem');\n\t\t});\n\t});\n\t\n\tit ('pull data if filter exists, embedded data is always ignored because source is the server', function() {\n\t\tvar returned = false;\n\t\texpect(originInfo.get().getRecords('.').length).toEqual(10);\n\t});\n\n\tit ('can create an external item', function() {\n\n\t\tvar returned = false;\n\t\truns(function() {\n\t\t\tvar obj = new pebble.Pebble();\n\t\t\tvar params = obj.getParams();\n\t\t\tobj.setCallback(function() { returned = true; });\n\t\t\t\n\t\t\tspyOn(ctrl1, 'onArrayItemsAdded').andCallThrough();\n\t\t\tspyOn(ctrl2, 'onArrayItemsAdded').andCallThrough();\n\t\t\tspyOn(ctrl3, 'onArrayItemsAdded').andCallThrough();\n\t\t\tctrl1.createArrayItem(obj);\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn returned;\n\t\t}, 'createArrayItem should have returned', 300);\n\n\t\truns(function() {\n\t\t\t//after created on the server, the controls are notified, its up to them to get their own data\n\t\t\texpect(ctrl1.onArrayItemsAdded).toHaveBeenCalled();\n\t\t\texpect(ctrl1.onArrayItemsAdded.calls.length).toEqual(1);\n\t\t\texpect(ctrl2.onArrayItemsAdded).toHaveBeenCalled();\n\t\t\texpect(ctrl2.onArrayItemsAdded.calls.length).toEqual(1);\n\t\t\texpect(ctrl3.onArrayItemsAdded).toHaveBeenCalled();\n\t\t\texpect(ctrl3.onArrayItemsAdded.calls.length).toEqual(1);\n\t\t\t\n\t\t\tvar returned = false;\n\t\t\t//delete what we created\t\n\t\t\tctrl1.setSelectedItem('a10', function() {\n\n\t\t\t\tvar obj = new pebble.Pebble();\n\t\t\t\tvar params = obj.getParams();\n\t\t\t\tobj.setCallback(function() { returned = true; });\n\t\t\t\t\n\t\t\t\tspyOn(ctrl1, 'onBeforeArrayItemsDeleted').andCallThrough();\n\t\t\t\tspyOn(ctrl2, 'onBeforeArrayItemsDeleted').andCallThrough();\n\t\t\t\tspyOn(ctrl3, 'onBeforeArrayItemsDeleted').andCallThrough();\n\t\t\t\tctrl1.deleteSelectedItem(obj);\n\n\t\t\t});\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\treturn returned;\n\t\t}, 'createArrayItem should have returned from delete', 300);\n\n\t\truns(function() {\n\t\t\t//after created on the server, the controls are notified, its up to them to get their own data\n\t\t\texpect(ctrl1.onBeforeArrayItemsDeleted).toHaveBeenCalled();\n\t\t\texpect(ctrl1.onBeforeArrayItemsDeleted.calls.length).toEqual(1);\n\t\t\texpect(ctrl2.onBeforeArrayItemsDeleted).toHaveBeenCalled();\n\t\t\texpect(ctrl2.onBeforeArrayItemsDeleted.calls.length).toEqual(1);\n\t\t\texpect(ctrl3.onBeforeArrayItemsDeleted).toHaveBeenCalled();\n\t\t\texpect(ctrl3.onBeforeArrayItemsDeleted.calls.length).toEqual(1);\n\t\t});\n\t});\n\n\tit ('can create an external item with own tag name', function() {\n\n\t\tvar meta = 'myname', \n\t\t\t\tname = 'Item1', \n\t\t\t\tupdateText = 'update text', \n\t\t\t\twriteThruUpdateText = 'update again';\n\n\t\tvar returned = false;\n\t\truns(function() {\n\t\t\tvar obj = new pebble.Pebble();\n\t\t\tvar params = obj.getParams();\n\t\t\n\t\t\tvar data = new pebble.Pebble();\n\t\t\tdata.setValue('key_', meta);\n\t\t\tdata.setValue('name', name);\n\t\t\tparams.setFull('withData', data);\n\t\t\t\n\t\t\tobj.setCallback(function() { returned = true; });\n\t\t\tspyOn(ctrl1, 'onArrayItemsAdded').andCallThrough();\n\t\t\tctrl1.createArrayItem(obj);\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn returned;\n\t\t}, 'createArrayItem should have returned', 300);\n\n\t\tvar newItem;\n\t\truns(function() {\n\t\t\t//after created on the server, the controls are notified, its up to them to get their own data\n\t\t\texpect(ctrl1.onArrayItemsAdded).toHaveBeenCalled();\n\t\t\texpect(ctrl1.onArrayItemsAdded.calls.length).toEqual(1);\n\t\t\treturned = false;\n\t\t\tctrl1.retrieveArrayItem(meta, false, function(data) {\n\t\t\t\tnewItem = data;\n\t\t\t\treturned = true;\t\n\t\t\t});\n\t\t});\n\t\twaitsFor(function() {\n\t\t\treturn returned;\n\t\t}, 'should have returned', 300);\n\n\t\truns(function() {\n\t\t\texpect(newItem.getValue('name')).toEqual(name);\n\t\t\t\n\t\t\tvar origin = ctrl1.getOriginInfo('collection.' + meta);\n\t\t\tspyOn(ctrl1, 'onArrayItemsUpdated').andCallThrough();\n\t\t\tvar item = new pebble.Pebble();\n\t\t\titem.setValue('text', updateText);\n\t\t\torigin.set(item, ctrl1, true);//set silent\n\t\t\treturned = false;\n\t\t\tctrl1.updateArrayItem(meta, null, false, function(){ returned = true;});\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn returned;\n\t\t}, 'should have returned', 300);\n\n\t\tvar updateItem;\n\t\truns(function() {\n\t\t\t//after created on the server, the controls are notified, its up to them to get their own data\n\t\t\texpect(ctrl1.onArrayItemsUpdated).toHaveBeenCalled();\n\t\t\texpect(ctrl1.onArrayItemsUpdated.calls.length).toEqual(1);\n\n\t\t\treturned = false;\n\t\t\tctrl1.retrieveArrayItem(meta, false, function(data) {\n\t\t\t\tupdateItem = data;\n\t\t\t\treturned = true;\t\n\t\t\t});\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\treturn returned;\n\t\t}, 'should have returned', 300);\n\n\t\truns(function() {\n\t\t\texpect(updateItem.getValue('text')).toEqual(updateText);//there is no data there but ps._isSelected creates the item \n\t\t\t\n\t\t\t//can update writeThru when relPath specified for an external item\n\t\t\tvar textData = new pebble.Pebble();\n\t\t\ttextData.setValue('.', writeThruUpdateText);\n\t\t\tvar relPath = 'text';\t\n\t\t\tvar origin = ctrl1.getOriginInfo('collection.' + meta + '.' + relPath);\n\t\t\tvar returned = false;\n\t\t\t\n\t\t\torigin.set(textData, ctrl1, true);//set silent\n\t\t\tctrl1.updateArrayItem(meta, relPath, false, function(){ returned = true;});\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\treturn returned;\n\t\t}, 'should have returned', 300);\n\n\t\tvar updateItem;\n\t\truns(function() {\n\t\t\t//after created on the server, the controls are notified, its up to them to get their own data\n\t\t\texpect(ctrl1.onArrayItemsUpdated).toHaveBeenCalled();\n\t\t\texpect(ctrl1.onArrayItemsUpdated.calls.length).toEqual(2);\n\t\t\treturned = false;\n\t\t\tctrl1.retrieveArrayItem(meta, false, function(data) {\n\t\t\t\tupdateItem = data;\n\t\t\t\treturned = true;\t\n\t\t\t});\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\treturn returned;\n\t\t}, 'should have returned', 300);\n\n\t\truns(function() {\n\t\t\tvar origin = ctrl1.getOriginInfo('collection.' + meta + '.text');\n\t\t\tvar newlyRetrievedItem = origin.get();\n\t\t\texpect(newlyRetrievedItem.getValue('.')).toEqual(writeThruUpdateText);//there is no data there but ps._isSelected creates the item \n\n\n\t\t\tvar returned = false;\n\t\t\t//delete what we created\t\n\t\t\tctrl1.setSelectedItem(meta, function() {\n\n\t\t\t\tvar obj = new pebble.Pebble();\n\t\t\t\tvar params = obj.getParams();\n\t\t\t\tobj.setCallback(function() { returned = true; });\n\t\t\t\t\n\t\t\t\tspyOn(ctrl1, 'onBeforeArrayItemsDeleted').andCallThrough();\n\t\t\t\tctrl1.deleteSelectedItem(obj);\n\n\t\t\t});\n\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\treturn returned;\n\t\t}, 'createArrayItem should have returned from delete', 300);\n\n\t\truns(function() {\n\t\t\t//after created on the server, the controls are notified, its up to them to get their own data\n\t\t\texpect(ctrl1.onBeforeArrayItemsDeleted).toHaveBeenCalled();\n\t\t\texpect(ctrl1.onBeforeArrayItemsDeleted.calls.length).toEqual(1);\n\t\t});\n\t});\n\n\n});\n\n\n"},{"key":"path","val":"frontend/test/controls/TestArrayTreeBaseExternal.js"},{"key":"ext","val":"js"}]},{"key":"TestInputControls","val":[{"key":"testCode","val":"\nvar topApp;\n\ndescribe('testInputControls', function () {\n\n\tfunction getInnerMarkup(control, testItemField, inputType) {\n\t\tvar ctrl = new pebble.Pebble();\n\t\tctrl.setRef('.', 'standard:' + control);\n\t\tctrl.setRef('model._bind', 'testItem.' + testItemField);\n\t\t\n\t\tvar ele = new pebble.Pebble('input');\n\t\tele.setAttribute('.', 'type', inputType);\n\t\tele.set('control', ctrl);\n\n\t\tvar innerMarkup = new pebble.Pebble();\n\t\tinnerMarkup.add('.', ele);\n\n\t\treturn innerMarkup;\n\t}\n\n\tit ('requires deployment and testAppControl', function() {\n\t\tvar ready = false;\n\t\truns(function() {\n\t\t\tgetDeployment(function(depObj) {\n\t\t\t\ttopApp && topApp.kill();\n\t\t\t\ttopApp = new pebble.libs.standard.TopModule(document.createElement('div'), depObj, 'top');\n\t\t\t\ttopApp.load(function() {\n\t\t\t\t\tready = true;\t\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn ready;\n\t\t}, 'wait for deployment and testAppControl', 300);\n\n\t});\n\n\n\tit ('textInput should load and react to data change', function() {\n\n\t\tvar ctrl;\n\t\tvar innerMarkup = getInnerMarkup('TextInput', 'text', 'text');\t\n\t\tvar dm = topApp.item;\n\n\t\tvar LOADVAL = 'hello';\n\t\tvar CHANGEVAL = 'goodbye';\n\t\tdm.set('innerMarkup', innerMarkup);\n\t\tdm.setValue('testItem.text', LOADVAL);\n\t\truns(function() {\n\t\t\ttopApp.item.loadManager.ctxLoaded = false;\n\t\t\ttopApp.getItem(dm);\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn topApp.item.loadManager.ctxLoaded;\t \n\t\t}, 'ctx did not load', 300);\n\n\t\truns(function() {\n\t\t\tctrl = topApp.item.modules['childmod0'].item; \n\t\t\tvar originInfo = ctrl.getOriginInfo('model'); \n\t\t\texpect(originInfo.getValue()).toEqual(LOADVAL);\n\t\t\texpect(ctrl.element.value).toEqual(LOADVAL);\n\n\t\t\tvar data = new pebble.Pebble();\n\t\t\tdata.setValue('.', CHANGEVAL);\n\t\t\tchanged = false;\n\t\t\toriginInfo.set(data, topApp.item, false, function() {\n\t\t\t\tchanged = true;\n\t\t\t});\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\t\treturn changed;\n\t\t}, 'data still not set', 300);\n\n\t\truns(function() {\n\t\t\texpect(ctrl.element.value).toEqual(CHANGEVAL);\n\n\t\t\tctrl.element.value = LOADVAL;\n\t\t\tctrl.saveManager.save(function() {});\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\t\treturn ctrl.saveManager.isValidSave;\n\t\t}, 'still waiting for to set own data', 300);\n\n\t\truns(function() {\n\t\t\texpect(topApp.item.getValue('testItem.text')).toEqual(LOADVAL);\n\t\t});\n\t});\n\t\n\tit ('numberInput / number should load and react to data change', function() {\n\n\t\tvar ctrl;\n\t\tvar innerMarkup = getInnerMarkup('NumberInput', 'number', 'number');\t\n\t\tvar dm = topApp.item;\n\n\t\tvar LOADVAL = 1;\n\t\tvar CHANGEVAL = 2;\n\t\tdm.set('innerMarkup', innerMarkup);\n\t\tdm.setValue('testItem.number', LOADVAL);\n\n\t\truns(function() {\n\t\t\ttopApp.item.loadManager.ctxLoaded = false;\n\t\t\ttopApp.getItem(dm);\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn topApp.item.loadManager.ctxLoaded;\t \n\t\t}, 'ctx did not load', 300);\n\n\t\truns(function() {\n\t\t\tctrl = topApp.item.modules['childmod0'].item; \n\t\t\tvar originInfo = ctrl.getOriginInfo('model'); \n\t\t\texpect(originInfo.getInt()).toEqual(LOADVAL);\n\t\t\texpect(parseInt(ctrl.element.value)).toEqual(LOADVAL);\n\n\t\t\tvar data = new pebble.Pebble();\n\t\t\tdata.setValue('.', CHANGEVAL);\n\t\t\tchanged = false;\n\t\t\toriginInfo.set(data, topApp.item, false, function() {\n\t\t\t\tchanged = true;\n\t\t\t});\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\t\treturn changed;\n\t\t}, 'data still not set', 300);\n\n\t\truns(function() {\n\t\t\texpect(parseInt(ctrl.element.value)).toEqual(CHANGEVAL);\n\n\t\t\tctrl.element.value = LOADVAL;\n\t\t\tctrl.saveManager.save(function() {});\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\t\treturn ctrl.saveManager.isValidSave;\n\t\t}, 'still waiting for to set own data', 300);\n\n\t\truns(function() {\n\t\t\texpect(topApp.item.getInt('testItem.number')).toEqual(LOADVAL);\n\t\t});\n\t});\n\t\n\tit ('numberInput / range should load and react to data change', function() {\n\n\t\tvar ctrl;\n\t\tvar innerMarkup = getInnerMarkup('NumberInput', 'number', 'range');\t\n\t\tvar dm = topApp.item;\n\n\t\tvar LOADVAL = 1;\n\t\tvar CHANGEVAL = 2;\n\t\tdm.set('innerMarkup', innerMarkup);\n\t\tdm.setValue('testItem.number', LOADVAL);\n\n\t\truns(function() {\n\t\t\ttopApp.item.loadManager.ctxLoaded = false;\n\t\t\ttopApp.getItem(dm);\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn topApp.item.loadManager.ctxLoaded;\t \n\t\t}, 'ctx did not load', 300);\n\n\t\truns(function() {\n\t\t\tctrl = topApp.item.modules['childmod0'].item; \n\t\t\tvar originInfo = ctrl.getOriginInfo('model'); \n\t\t\texpect(originInfo.getInt()).toEqual(LOADVAL);\n\t\t\texpect(parseInt(ctrl.element.value)).toEqual(LOADVAL);\n\n\t\t\tvar data = new pebble.Pebble();\n\t\t\tdata.setValue('.', CHANGEVAL);\n\t\t\tchanged = false;\n\t\t\toriginInfo.set(data, topApp.item, false, function() {\n\t\t\t\tchanged = true;\n\t\t\t});\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\t\treturn changed;\n\t\t}, 'data still not set', 300);\n\n\t\truns(function() {\n\t\t\texpect(parseInt(ctrl.element.value)).toEqual(CHANGEVAL);\n\n\t\t\tctrl.element.value = LOADVAL;\n\t\t\tctrl.saveManager.save(function() {});\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\t\treturn ctrl.saveManager.isValidSave;\n\t\t}, 'still waiting for to set own data', 300);\n\n\t\truns(function() {\n\t\t\texpect(topApp.item.getInt('testItem.number')).toEqual(LOADVAL);\n\t\t});\n\t});\n\n\tit ('colorInput should load and react to data change', function() {\n\n\t\tvar ctrl;\n\t\tvar innerMarkup = getInnerMarkup('ColorInput', 'color', 'color');\t\n\t\tvar dm = topApp.item;\n\n\t\tvar LOADVAL = '#eeeeee';\n\t\tvar CHANGEVAL = '#ffffff';\n\t\tdm.set('innerMarkup', innerMarkup);\n\t\tdm.setValue('testItem.color', LOADVAL);\n\n\t\truns(function() {\n\t\t\ttopApp.item.loadManager.ctxLoaded = false;\n\t\t\ttopApp.getItem(dm);\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn topApp.item.loadManager.ctxLoaded;\t \n\t\t}, 'ctx did not load', 300);\n\n\t\truns(function() {\n\t\t\tctrl = topApp.item.modules['childmod0'].item; \n\t\t\tvar originInfo = ctrl.getOriginInfo('model'); \n\t\t\texpect(originInfo.getValue()).toEqual(LOADVAL);\n\t\t\texpect(ctrl.element.value).toEqual(LOADVAL);\n\n\t\t\tvar data = new pebble.Pebble();\n\t\t\tdata.setValue('.', CHANGEVAL);\n\t\t\tchanged = false;\n\t\t\toriginInfo.set(data, topApp.item, false, function() {\n\t\t\t\tchanged = true;\n\t\t\t});\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\t\treturn changed;\n\t\t}, 'data still not set', 300);\n\n\t\truns(function() {\n\t\t\texpect(ctrl.element.value).toEqual(CHANGEVAL);\n\n\t\t\tctrl.element.value = LOADVAL;\n\t\t\tctrl.saveManager.save(function() {});\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\t\treturn ctrl.saveManager.isValidSave;\n\t\t}, 'still waiting for to set own data', 300);\n\n\t\truns(function() {\n\t\t\texpect(topApp.item.getValue('testItem.color')).toEqual(LOADVAL);\n\t\t});\n\t});\n\n\tit ('dateInput should load and react to data change', function() {\n\n\t\tvar ctrl;\n\t\tvar innerMarkup = getInnerMarkup('DateInput', 'date', 'date');\t\n\t\tvar dm = topApp.item;\n\n\t\tvar LOADVAL = '2000-12-01';//must be in this format\n\t\tvar CHANGEVAL = '2010-04-10';\n\t\tdm.set('innerMarkup', innerMarkup);\n\t\tdm.setValue('testItem.date', LOADVAL);\n\n\t\truns(function() {\n\t\t\ttopApp.item.loadManager.ctxLoaded = false;\n\t\t\ttopApp.getItem(dm);\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn topApp.item.loadManager.ctxLoaded;\t \n\t\t}, 'ctx did not load', 300);\n\n\t\truns(function() {\n\t\t\tctrl = topApp.item.modules['childmod0'].item; \n\t\t\tvar originInfo = ctrl.getOriginInfo('model'); \n\t\t\texpect(originInfo.getValue()).toEqual(LOADVAL);\n\t\t\texpect(ctrl.element.value).toEqual(LOADVAL);\n\n\t\t\tvar data = new pebble.Pebble();\n\t\t\tdata.setValue('.', CHANGEVAL);\n\t\t\tchanged = false;\n\t\t\toriginInfo.set(data, topApp.item, false, function() {\n\t\t\t\tchanged = true;\n\t\t\t});\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\t\treturn changed;\n\t\t}, 'data still not set', 300);\n\n\t\truns(function() {\n\t\t\texpect(ctrl.element.value).toEqual(CHANGEVAL);\n\n\t\t\tctrl.element.value = LOADVAL;\n\t\t\tctrl.saveManager.save(function() {});\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\t\treturn ctrl.saveManager.isValidSave;\n\t\t}, 'still waiting for to set own data', 300);\n\n\t\truns(function() {\n\t\t\texpect(topApp.item.getValue('testItem.date')).toEqual(LOADVAL);\n\t\t});\n\t});\n\n\tit ('checkBox / checkbox should load and react to data change', function() {\n\n\t\tvar ctrl;\n\t\tvar innerMarkup = getInnerMarkup('CheckBox', 'bool', 'checkbox');\t\n\t\tvar dm = topApp.item;\n\n\t\tvar LOADVAL = true;\n\t\tvar CHANGEVAL = false;\n\t\tdm.set('innerMarkup', innerMarkup);\n\t\tdm.setValue('testItem.bool', LOADVAL);\n\n\t\truns(function() {\n\t\t\ttopApp.item.loadManager.ctxLoaded = false;\n\t\t\ttopApp.getItem(dm);\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn topApp.item.loadManager.ctxLoaded;\t \n\t\t}, 'ctx did not load', 300);\n\n\t\truns(function() {\n\t\t\tctrl = topApp.item.modules['childmod0'].item; \n\t\t\tvar originInfo = ctrl.getOriginInfo('model'); \n\t\t\texpect(originInfo.getBool()).toEqual(LOADVAL);\n\t\t\texpect(ctrl.element.checked).toEqual(LOADVAL);\n\n\t\t\tvar data = new pebble.Pebble();\n\t\t\tdata.setValue('.', CHANGEVAL);\n\t\t\tchanged = false;\n\t\t\toriginInfo.set(data, topApp.item, false, function() {\n\t\t\t\tchanged = true;\n\t\t\t});\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\t\treturn changed;\n\t\t}, 'data still not set', 300);\n\n\t\truns(function() {\n\t\t\texpect(ctrl.element.checked).toEqual(CHANGEVAL);\n\n\t\t\tctrl.element.checked = LOADVAL;\n\t\t\tctrl.saveManager.save(function() {});\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\t\treturn ctrl.saveManager.isValidSave;\n\t\t}, 'still waiting for to set own data', 300);\n\n\t\truns(function() {\n\t\t\texpect(topApp.item.getBool('testItem.bool')).toEqual(LOADVAL);\n\t\t});\n\t});\n\n\tit ('referenceTextInput should load and react to data change', function() {\n\n\t\tvar ctrl;\n\t\tvar innerMarkup = getInnerMarkup('ReferenceTextInput', 'referenceEmbedded', 'text');\t\n\t\tvar dm = topApp.item;\n\n\t\tvar LOADVAL = 'a1';\n\t\tvar CHANGEVAL = 'a2';\n\t\tdm.set('innerMarkup', innerMarkup);\n\t\tdm.setRef('testItem.referenceEmbedded', LOADVAL);\n\n\t\truns(function() {\n\t\t\ttopApp.item.loadManager.ctxLoaded = false;\n\t\t\ttopApp.getItem(dm);\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn topApp.item.loadManager.ctxLoaded;\t \n\t\t}, 'ctx did not load', 300);\n\n\t\truns(function() {\n\t\t\tctrl = topApp.item.modules['childmod0'].item; \n\t\t\tvar originInfo = ctrl.getOriginInfo('model'); \n\t\t\texpect(originInfo.getRef()).toEqual(LOADVAL);\n\t\t\texpect(ctrl.element.value).toEqual(LOADVAL);\n\n\t\t\tvar data = new pebble.Pebble();\n\t\t\tdata.setRef('.', CHANGEVAL);\n\t\t\tchanged = false;\n\t\t\toriginInfo.set(data, topApp.item, false, function() {\n\t\t\t\tchanged = true;\n\t\t\t});\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\t\treturn changed;\n\t\t}, 'data still not set', 300);\n\n\t\truns(function() {\n\t\t\texpect(ctrl.element.value).toEqual(CHANGEVAL);\n\n\t\t\tctrl.element.value = LOADVAL;\n\t\t\tctrl.saveManager.save(function() {});\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\t\treturn ctrl.saveManager.isValidSave;\n\t\t}, 'still waiting for to set own data', 300);\n\n\t\truns(function() {\n\t\t\texpect(topApp.item.getRef('testItem.referenceEmbedded')).toEqual(LOADVAL);\n\t\t});\n\t});\n\n});\n\n\n"},{"key":"path","val":"frontend/test/controls/TestInputControls.js"},{"key":"ext","val":"js"}]},{"key":"TestRealTime","val":[{"key":"testCode","val":"describe('testRealTime', function () {\n\n\tfunction getInnerMarkup_emb(bindPoint) {\n\t\tvar ctrl1 = new pebble.Pebble();\n\t\tctrl1.setRef('.', 'standard:ArrayTreeBase');\n\t\tctrl1.setRef('model._bind', bindPoint);\n\t\t//ctrl1.setRef('onSelected.exec', 'this.save');\n\n\t\tvar div1 = new pebble.Pebble('div');\n\t\tdiv1.set('control', ctrl1);\n\n\t\tvar innerMarkup = new pebble.Pebble();\n\t\tinnerMarkup.add('.', div1);\n\n\t\tvar ctrl2 = new pebble.Pebble();\n\t\tctrl2.setRef('.', 'standard:ArrayTreeBase');\n\t\tctrl2.setRef('model._bind', bindPoint);\n\t\t\n\t\tvar embData = new pebble.Pebble();\n\t\tembData.setValue('a0.text', 'embData1');\n\t\tembData.setValue('a1.text', 'embData2');\n\n\t\tctrl2.set('model', embData);\n\n\t\tvar div2 = new pebble.Pebble('div');\n\t\tdiv2.set('control', ctrl2);\n\n\t\tinnerMarkup.add('.', div2);\n\n\t\treturn innerMarkup;\n\t}\n\t\n\tbeforeEach(function() {\n\n\t});\n\tafterEach(function() {\n\n\t});\n\n\tvar topApp1, topApp2;\n\n\tit ('requires two top controls', function() {\n\t\t\n\n\t\tvar ready1 = false;\n\t\tvar ready2 = false;\n\t\tpebble.testServer.sessions = {};//all the previous ones dont clear\n\t\tpebble.testServer.sessionCount = 0;\n\n\n\t\truns(function() {\n\t\t\tgetDeployment(function(depObj) {\n\t\t\t\t\n\t\t\t\ttopApp1 = new pebble.libs.standard.TopModule(document.createElement('div'), depObj, 'top1');\n\t\t\t\ttopApp1.load(function() {\n\t\t\t\t\tready1 = true;\t\n\t\t\t\t});\n\n\t\t\t\ttopApp2 = new pebble.libs.standard.TopModule(document.createElement('div'), depObj, 'top2');\n\t\t\t\ttopApp2.load(function() {\n\t\t\t\t\tready2 = true;\t\n\t\t\t\t});\n\t\t\t\t\n\t\t\t});\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn ready1 && ready2;\n\t\t}, 'wait', 600);\n\n\t\truns(function() {\n\n\t\t\texpect(pebble.testServer.sessionCount).toEqual(2);\n\n\t\t});\n\t});\n\n\tit ('arrayEmbedded', function() {\n\n\t\tvar innerMarkup = getInnerMarkup_emb('model.testEmbItems');\t\n\t\tvar dm = topApp.item;\n\n\t\tdm.set('innerMarkup', innerMarkup);\n\n\t\truns(function() {\n\t\t\ttopApp1.item.loadManager.ctxLoaded = false;\n\t\t\ttopApp1.getItem(dm);\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn topApp.item.loadManager.ctxLoaded;\t \n\t\t}, 'ctx did not load', 300);\n\n\t\truns(function() {\n\t\t\tvar ctrl1 = topApp1.item.modules['childmod0'].item; \n\n\t\t\tvar originInfo = ctrl1.getOriginInfo('model');\n\t\t\texpect(originInfo.getThisType().getRef('arrayFormId').split('.').pop()).toEqual('testItem');\n\n\t\t});\n\t\t\n\t});\n\t\n\n});\n\n\n"},{"key":"path","val":"frontend/test/controls/TestRealTime.js"},{"key":"ext","val":"js"}]},{"key":"TestSelection","val":[{"key":"testCode","val":"/** testBasicMultiselect \n *\n * Test basic multiselect operations such as, delete / update selected, change\n * group, get group The implementation is based on \n * - setMultiSelect, deleteGroup, etc.\n * - _selection.group specification: (selectedMetas, count) \n *\n * Setup: Two arrayControls bound to the same array where multiSelect,\n * updateGroup, deleteGroup, getGroup are tested\n */\n\nvar topApp, returned, ctrl1;\n\ndescribe('testSelection', function () {\n\n\tfunction getInnerMarkup_emb(bindPoint) {\n\t\tvar ctrl1 = new pebble.Pebble();\n\t\tctrl1.setRef('.', 'standard:ArrayControl');\n\t\tctrl1.setRef('model._bind', bindPoint);\n\t\t\n\t\tvar control1 = new pebble.Pebble();\n\t\tcontrol1.setRef('.', 'standard:TextInput');\n\t\tcontrol1.setRef('model._bind', 'model');\n\n\t\tvar displayControl1 = new pebble.Pebble();\n\t\tdisplayControl1.setRef('mapPath', 'text');\n\t\tdisplayControl1.set('innerMarkup.control', control1);\n\n\t\tctrl1.set('childElement.input', new pebble.Pebble());\n\t\tctrl1.setAttribute('childElement.input', 'type', 'text');\n\t\tctrl1.set('displayControl', displayControl1);\n\n\t\tvar div1 = new pebble.Pebble('div');\n\t\tdiv1.set('control', ctrl1);\n\n\t\tvar innerMarkup = new pebble.Pebble();\n\t\tinnerMarkup.add('.', div1);\n\n\t\tvar ctrl2 = new pebble.Pebble();\n\t\tctrl2.setRef('.', 'standard:ArrayControl');\n\t\tctrl2.setRef('model._bind', bindPoint);\n\t\t\n\t\tvar displayControl2 = new pebble.Pebble();\n\t\tdisplayControl2.setValue('innerMarkup', '{{item.text}}');\n\n\t\tctrl2.set('childElement.div', new pebble.Pebble());\n\t\tctrl2.set('displayControl', displayControl2);\n\n\t\tvar div2 = new pebble.Pebble('div');\n\t\tdiv2.set('control', ctrl2);\n\n\t\tinnerMarkup.add('.', div2);\n\n\t\treturn innerMarkup;\n\t}\n\n\tbeforeEach(function() {\n\n\t\tvar ready = false;\n\t\truns(function() {\n\t\t\tgetDeployment(function(depObj) {\n\t\t\t\ttopApp && topApp.kill();\n\t\t\t\ttopApp = new pebble.libs.standard.TopModule(document.createElement('div'), depObj, 'top');\n\t\t\t\ttopApp.load(function() {\n\t\t\t\t\tvar innerMarkup = getInnerMarkup_emb('model.testEmbItems');\t\n\t\t\t\t\tvar dm = topApp.item;\n\n\t\t\t\t\tdm.set('innerMarkup', innerMarkup);\n\n\t\t\t\t\treturned = false;\n\t\t\t\t\ttopApp.item.loadManager.ctxLoaded = false;\n\t\t\t\t\ttopApp.getItem(dm, function() {\n\n\t\t\t\t\t\tctrl1 = topApp.item.modules['childmod0'].item; \n\t\t\t\t\t\tctrl2 = topApp.item.modules['childmod1'].item; \n\t\t\t\t\t\tready = true;\t\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t\t\n\t\t\twaitsFor(function() {\n\t\t\t\treturn ready;\t \n\t\t\t}, 'deployment or ctx did not load', 300);\n\n\t\t});\n\n\t});\n\n\tit ('multiSelect should toggle', function() {\n\n\t\truns(function() {\n\t\t\treturned = false;\n\t\t\tctrl1.setMultipleSelectedItem('a1', 'groupA', function() {\n\n\t\t\t\treturned = true;\n\n\t\t\t});\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\treturn returned;\t \n\t\t}, 'ctx did not load', 300);\n\t\t\n\t\truns(function() {\n\n\t\t\texpect(ctrl1.getOriginInfo('model.a1._selection.groupA.selected').getBool()).toEqual(true);\n\t\t\texpect(ctrl1.getOriginInfo('model._selection.groupA.metas.a1').get()).not.toBe(null);\n\t\t\texpect(ctrl1.getOriginInfo('model._selection.groupA.count').getInt()).toEqual(1);\n\t\t\t\t\n\t\t\treturned = false;\n\t\t\tctrl1.setMultipleSelectedItem('a1', 'groupA', function() {\n\n\t\t\t\treturned = true;\n\n\t\t\t});\n\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\treturn returned;\t \n\t\t}, 'ctx did not load', 300);\n\t\t\n\t\truns(function() {\n\n\t\t\texpect(ctrl1.getOriginInfo('model.a1._selection.groupA.selected').getBool()).toEqual(false);\n\t\t\texpect(ctrl1.getOriginInfo('model._selection.groupA.metas.a1').get()).toBe(null);\n\t\t\texpect(ctrl1.getOriginInfo('model._selection.groupA.count').getInt()).toEqual(0);\n\t\t\t\t\n\t\t});\n\t});\n\n\tit ('should multiSelect', function() {\n\n\t\tvar returned1 = false;\n\t\tvar returned2 = false;\n\n\t\truns(function() {\n\t\t\t\t\n\t\t\t\tctrl1 = topApp.item.modules['childmod0'].item; \n\t\t\t\tctrl1.setMultipleSelectedItem('a1', 'groupA', function() {\n\n\t\t\t\t\treturned1 = true;\n\t\t\t\t\t\n\t\t\t\t});\n\t\t\t\tctrl1.setMultipleSelectedItem('a2', 'groupA', function() {\n\n\t\t\t\t\treturned2 = true;\n\t\t\t\t\t\n\t\t\t\t});\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn returned1 && returned2;\t \n\t\t}, 'ctx did not load', 300);\n\n\t\truns(function() {\n\n\t\t\texpect(ctrl1.getOriginInfo('model.a1._selection.groupA.selected').getBool()).toEqual(true);\n\t\t\texpect(ctrl1.getOriginInfo('model.a2._selection.groupA.selected').getBool()).toEqual(true);\n\t\t\texpect(ctrl1.getOriginInfo('model._selection.groupA.metas.a1').get()).not.toBe(null);\n\t\t\texpect(ctrl1.getOriginInfo('model._selection.groupA.metas.a2').get()).not.toBe(null);\n\t\t\texpect(ctrl1.getOriginInfo('model._selection.groupA.count').getInt()).toEqual(2);\n\n\t\t\texpect(ctrl2.getOriginInfo('model.a1._selection.groupA.selected').getBool()).toEqual(true);\n\t\t\texpect(ctrl2.getOriginInfo('model.a2._selection.groupA.selected').getBool()).toEqual(true);\n\t\t\texpect(ctrl2.getOriginInfo('model._selection.groupA.metas.a1').get()).not.toBe(null);\n\t\t\texpect(ctrl2.getOriginInfo('model._selection.groupA.metas.a2').get()).not.toBe(null);\n\t\t\texpect(ctrl2.getOriginInfo('model._selection.groupA.count').getInt()).toEqual(2);\n\t\t\t\n\t\t});\n\t\t\n\t});\n\t\n\tit ('should deleteGroup', function() {\n\n\t\tvar returned1 = false;\n\t\tvar returned2 = false;\n\n\t\truns(function() {\n\t\t\t\t\n\t\t\t\tctrl1 = topApp.item.modules['childmod0'].item; \n\t\t\t\tctrl1.setMultipleSelectedItem('a1', 'groupA', function() {\n\n\t\t\t\t\treturned1 = true;\n\t\t\t\t\t\n\t\t\t\t});\n\t\t\t\tctrl1.setMultipleSelectedItem('a2', 'groupA', function() {\n\n\t\t\t\t\treturned2 = true;\n\t\t\t\t\t\n\t\t\t\t});\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn returned1 && returned2;\t \n\t\t}, 'ctx did not load', 300);\n\n\t\tvar returned = false;\n\n\t\truns(function() {\n\n\t\t\tctrl1.deleteGroup('groupA', function() {returned = true;});\n\t\t\t\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\treturn returned;\t \n\t\t}, 'ctx did not load', 300);\n\t\t\n\t\truns(function() {\n\n\t\t\texpect(ctrl1.getOriginInfo('model.a1._selection.groupA.selected').getBool()).toEqual(false);\n\t\t\texpect(ctrl1.getOriginInfo('model.a2._selection.groupA.selected').getBool()).toEqual(false);\n\t\t\texpect(ctrl1.getOriginInfo('model._selection.groupA.metas.a1').get()).toBe(null);\n\t\t\texpect(ctrl1.getOriginInfo('model._selection.groupA.metas.a2').get()).toBe(null);\n\t\t\texpect(ctrl1.getOriginInfo('model._selection.groupA.count').getInt()).toEqual(0);\n\n\t\t\texpect(ctrl1.origin.getRecords().length).toEqual(3);\n\t\t\t\n\t\t});\n\t});\n\n\tit ('can updateGroup', function() {\n\n\t\tvar returned1 = false;\n\t\tvar returned2 = false;\n\n\t\truns(function() {\n\t\t\t\t\n\t\t\t\tctrl1 = topApp.item.modules['childmod0'].item; \n\t\t\t\tctrl1.setMultipleSelectedItem('a1', 'groupA', function() {\n\n\t\t\t\t\treturned1 = true;\n\t\t\t\t\t\n\t\t\t\t});\n\t\t\t\tctrl1.setMultipleSelectedItem('a2', 'groupA', function() {\n\n\t\t\t\t\treturned2 = true;\n\t\t\t\t\t\n\t\t\t\t});\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn returned1 && returned2;\t \n\t\t}, 'ctx did not load', 300);\n\n\t\tvar returned = false;\n\n\t\truns(function() {\n\n\t\t\tvar data = new pebble.Pebble();\n\t\t\tdata.setValue('.', 'tag1');\n\t\t\tctrl1.setGroup('groupA', 'text', data, function() {returned = true;});\n\t\t\t\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\treturn returned;\t \n\t\t}, 'ctx did not load', 300);\n\t\t\n\t\truns(function() {\n\n\t\t\texpect(ctrl1.getOriginInfo('model.a1._selection.groupA.selected').getBool()).toEqual(true);\n\t\t\texpect(ctrl1.getOriginInfo('model.a2._selection.groupA.selected').getBool()).toEqual(true);\n\t\t\texpect(ctrl1.getOriginInfo('model.a1.text').getValue()).toEqual('tag1');\n\t\t\texpect(ctrl1.getOriginInfo('model.a2.text').getValue()).toEqual('tag1');\n\t\t\t\n\t\t});\n\t});\n\n\tit ('can get group', function() {\n\n\t\tvar returned1 = false;\n\t\tvar returned2 = false;\n\n\t\truns(function() {\n\t\t\t\t\n\t\t\t\tctrl1 = topApp.item.modules['childmod0'].item; \n\t\t\t\tctrl1.setMultipleSelectedItem('a1', 'groupA', function() {\n\n\t\t\t\t\treturned1 = true;\n\t\t\t\t\t\n\t\t\t\t});\n\t\t\t\tctrl1.setMultipleSelectedItem('a2', 'groupA', function() {\n\n\t\t\t\t\treturned2 = true;\n\t\t\t\t\t\n\t\t\t\t});\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn returned1 && returned2;\t \n\t\t}, 'ctx did not load', 300);\n\n\t\tvar returned = false;\n\t\tvar obj;\n\t\truns(function() {\n\n\t\t\tobj = new pebble.Pebble();\n\t\t\tvar params = obj.getParams();\n\t\t\tparams.setRef('.', 'this.getGroup');\n\t\t\tparams.setValue('group', 'groupA');\n\t\t\tobj.setCallback(function() {\n\t\t\t\treturned = true;\n\t\t\t});\n\t\t\tctrl1.resolve(obj);\n\t\t\t\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\treturn returned;\t \n\t\t}, 'ctx did not load', 300);\n\t\t\n\t\truns(function() {\n\n\t\t\texpect(obj.getRecords('.').length).toEqual(2);\n\t\t\t\n\t\t\tobj = new pebble.Pebble();\n\t\t\tvar params = obj.getParams();\n\t\t\tparams.setRef('.', 'this.getGroup');\n\t\t\tparams.setValue('group', 'groupA');\n\t\t\tparams.setTrue('asRef');\n\t\t\tobj.setCallback(function() {\n\t\t\t\treturned = true;\n\t\t\t});\n\t\t\tctrl1.resolve(obj);\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\treturn returned;\t \n\t\t}, 'ctx did not load', 300);\n\t\t\n\t\truns(function() {\n\n\t\t\tvar recs = obj.getRecords('.');\n\t\t\texpect(recs.length).toEqual(2);\n\t\t\texpect(recs[0].getRef('.') == 'a1');\n\t\t\texpect(recs[1].getRef('.') == 'a2');\n\t\t\t\n\t\t\t//TODO: use getPath/setPath\n\t\t});\n\n\t});\n});\n\n\n"},{"key":"path","val":"frontend/test/controls/TestSelection.js"},{"key":"ext","val":"js"}]},{"key":"TestShowControls","val":[{"key":"testCode","val":"\nvar topApp;\n/**\n * show and input controls should \n * - load\n * - react to data changes\n */\ndescribe('testShowControls', function () {\n\n\tfunction getInnerMarkup(control, testItemField, containerEle) {\n\t\tvar ctrl = new pebble.Pebble();\n\t\tctrl.setRef('.', 'standard:' + control);\n\t\tctrl.setRef('model._bind', 'testItem.' + testItemField);\n\t\t\n\t\tvar ele = new pebble.Pebble(containerEle);\n\t\tele.set('control', ctrl);\n\n\t\tvar innerMarkup = new pebble.Pebble();\n\t\tinnerMarkup.add('.', ele);\n\n\t\treturn innerMarkup;\n\t}\n\n\tit ('requires deployment and testAppControl', function() {\n\t\tvar ready = false;\n\t\truns(function() {\n\t\t\tgetDeployment(function(depObj) {\n\t\t\t\ttopApp && topApp.kill();\n\t\t\t\ttopApp = new pebble.libs.standard.TopModule(document.createElement('div'), depObj, 'top');\n\t\t\t\ttopApp.load(function() {\n\t\t\t\t\tready = true;\t\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn ready;\n\t\t}, 'wait for deployment and testAppControl', 300);\n\n\t});\n\n\tit ('text should load and react to data change', function() {\n\n\t\tvar innerMarkup = getInnerMarkup('Text', 'text', 'div');\t\n\t\tvar dm = topApp.item;\n\t\tvar ctrl;\n\t\tvar LOADVAL = 'hello';\n\t\tvar CHANGEVAL = 'goodbye';\n\t\tdm.set('innerMarkup', innerMarkup);\n\t\tdm.setValue('testItem.text', LOADVAL);\n\n\t\truns(function() {\n\t\t\ttopApp.item.loadManager.ctxLoaded = false;\n\t\t\ttopApp.getItem(dm);\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn topApp.item.loadManager.ctxLoaded;\t \n\t\t}, 'ctx did not load', 300);\n\n\t\truns(function() {\n\t\t\tctrl = topApp.item.modules['childmod0'].item; \n\t\t\tvar originInfo = ctrl.getOriginInfo('model'); \n\t\t\texpect(originInfo.getValue()).toEqual(LOADVAL);\n\t\t\texpect(ctrl.element.innerHTML).toEqual(LOADVAL);\n\n\t\t\tvar data = new pebble.Pebble();\n\t\t\tdata.setValue('.', CHANGEVAL);\n\t\t\tchanged = false;\n\t\t\toriginInfo.set(data, topApp.item, false, function() {\n\t\t\t\tchanged = true;\n\t\t\t});\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\t\treturn changed;\n\t\t}, 'data still not set', 300);\n\n\t\truns(function() {\n\t\t\texpect(ctrl.element.innerHTML).toEqual(CHANGEVAL);\n\t\t});\n\t});\n\n\tit ('markup should load and react to data change', function() {\n\n\t\tvar innerMarkup = getInnerMarkup('Markup', 'markup', 'div');\t\n\t\tvar dm = topApp.item;\n\t\tvar ctrl;\n\t\tvar LOADVAL = '<div>hello</div>';\n\t\tvar CHANGEVAL = '<span>goodbye</span>';\n\t\tdm.set('innerMarkup', innerMarkup);\n\t\tdm.setMarkup('testItem.markup', LOADVAL);\n\n\t\truns(function() {\n\t\t\ttopApp.item.loadManager.ctxLoaded = false;\n\t\t\ttopApp.getItem(dm);\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn topApp.item.loadManager.ctxLoaded;\t \n\t\t}, 'ctx did not load', 300);\n\n\t\truns(function() {\n\t\t\tctrl = topApp.item.modules['childmod0'].item; \n\t\t\tvar originInfo = ctrl.getOriginInfo('model'); \n\t\t\texpect(originInfo.getValue()).toEqual(LOADVAL);\n\t\t\texpect(ctrl.element.innerHTML).toEqual(LOADVAL);\n\n\t\t\tvar data = new pebble.Pebble();\n\t\t\tdata.setMarkup('.', CHANGEVAL);\n\t\t\tchanged = false;\n\t\t\toriginInfo.set(data, topApp.item, false, function() {\n\t\t\t\tchanged = true;\n\t\t\t});\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\t\treturn changed;\n\t\t}, 'data still not set', 300);\n\n\t\truns(function() {\n\t\t\texpect(ctrl.element.innerHTML).toEqual(CHANGEVAL);\n\t\t});\n\t});\n\n\n\tit ('dateShow should load and react to data change', function() {\n\n\t\tvar innerMarkup = getInnerMarkup('DateShow', 'date', 'ele');\t\n\t\tvar dm = topApp.item;\n\t\tvar ctrl;\n\t\tvar LOADVAL = 'hello';\n\t\tvar CHANGEVAL = 'goodbye';\n\t\tdm.set('innerMarkup', innerMarkup);\n\t\tdm.setValue('testItem.date', LOADVAL);\n\n\t\truns(function() {\n\t\t\ttopApp.item.loadManager.ctxLoaded = false;\n\t\t\ttopApp.getItem(dm);\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn topApp.item.loadManager.ctxLoaded;\t \n\t\t}, 'ctx did not load', 300);\n\n\t\truns(function() {\n\t\t\tctrl = topApp.item.modules['childmod0'].item; \n\t\t\tvar originInfo = ctrl.getOriginInfo('model'); \n\t\t\texpect(originInfo.getValue()).toEqual(LOADVAL);\n\t\t\texpect(ctrl.element.innerHTML).toEqual(LOADVAL);\n\n\t\t\tvar data = new pebble.Pebble();\n\t\t\tdata.setValue('.', CHANGEVAL);\n\t\t\tchanged = false;\n\t\t\toriginInfo.set(data, topApp.item, false, function() {\n\t\t\t\tchanged = true;\n\t\t\t});\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\t\treturn changed;\n\t\t}, 'data still not set', 300);\n\n\t\truns(function() {\n\t\t\texpect(ctrl.element.innerHTML).toEqual(CHANGEVAL);\n\t\t});\n\t});\n});\n\n\n"},{"key":"path","val":"frontend/test/controls/TestShowControls.js"},{"key":"ext","val":"js"}]},{"key":"TestValidation","val":[{"key":"testCode","val":"\nvar topApp;\n/*\n *\n * should execute all validators\n * should stop at else (per control)\n * should execute all bot2Top\n * should put _validation\n * should execute ({{}}, _generate, and ref filters)\n */ \ndescribe('testValidation', function () {\n\n\tfunction getInnerMarkup(validators) {\n\t\tvar ctrl = new pebble.Pebble();\n\t\tctrl.setRef('.', 'standard:TextInput');\n\n\t\t\n\t\tctrl.set('validators', validators);\n\n\t\tvar innerMarkup = new pebble.Pebble();\n\t\tinnerMarkup.set('div.control', ctrl);\n\n\t\treturn innerMarkup;\n\t}\n\n\tbeforeEach(function() {\n\n\t});\n\tafterEach(function() {\n\n\t});\n\n\tit ('requires deployment', function() {\n\t\tvar ready = false;\n\t\truns(function() {\n\t\t\tgetDeployment(function(depObj) {\n\t\t\t\ttopApp && topApp.kill();\n\t\t\t\ttopApp = new pebble.libs.standard.TopModule(document.createElement('div'), depObj, 'top');\n\t\t\t\ttopApp.load(function() {\n\t\t\t\t\tready = true;\t\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn ready;\n\t\t}, 'wait for deployment', 300);\n\n\t\truns(function() {\n\t\t\texpect(pebble.libs.standard.Module.topMod.deployment).not.toBeNull();\n\t\t\tvar originInfo = topApp.item.getOriginInfo('model');\n\t\t\texpect(originInfo.getThisType().getRef('.').split('.').pop()).toEqual('standard');\n\t\t});\n\t});\n\n\n\tit ('can validate expressions', function() {\n\n\t\tvar validators = new pebble.Pebble();\n\t\t\n\t\tvar val1 = new pebble.Pebble();\n\t\tval1.setValue('filter', '{{this.model != null}}');\n\t\tval1.setValue('status', 'error');\n\t\tval1.setValue('message', 'required');\n\n\t\tvalidators.add2Array('.', val1);\n\n\t\tvar val2 = new pebble.Pebble();\n\t\tval2.setValue('filter', '{{this.model == null}}');\n\t\tval2.setValue('status', 'error');\n\t\tval2.setValue('message', 'null expected');\n\n\t\tvalidators.add2Array('.', val2);\n\t\t\n\t\tvar innerMarkup = getInnerMarkup(validators);\t\n\t\tvar dm = topApp.item;\n\n\t\tdm.set('innerMarkup', innerMarkup);\n\n\t\truns(function() {\n\t\t\ttopApp.item.loadManager.ctxLoaded = false;\n\t\t\ttopApp.getItem(dm);\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn topApp.item.loadManager.ctxLoaded;\t \n\t\t}, 'ctx did not load', 300);\n\n\t\tvar returned = false;\n\t\truns(function() {\n\t\t\tvar ctrl = topApp.item.modules['childmod0'].item; \n\t\t\tctrl.validate(function() {returned = true});\n\t\t\t//ctrl.saveManager.validate(true, function() { returned = true;});\n\t\t});\n\n\t\twaitsFor(function() {\n\t\t\treturn returned;\n\t\t}, 'validate should have returned', 300);\n\n\t\truns(function() {\n\n\t\t\tvar ctrl = topApp.item.modules['childmod0'].item; \n\t\t\texpect(ctrl.getOriginInfo('model._validation.status').getValue()).toEqual('error'); \n\t\t\t//should stop at first\n\t\t\texpect(ctrl.getOriginInfo('model._validation.message').getValue()).toEqual('required'); \n\n\n\t\t\treturned = false;\n\t\t\tctrl.setValue('model', 'hello');\n\t\t\tctrl.validate(function() {returned = true});\n\n\t\t});\n\t\t\n\t\twaitsFor(function() {\n\t\t\treturn returned;\n\t\t}, 'validate should have returned', 300);\n\n\t\truns(function() {\n\n\t\t\t//should stop at second\n\t\t\tvar ctrl = topApp.item.modules['childmod0'].item; \n\t\t\texpect(ctrl.getOriginInfo('model._validation.status').getValue()).toEqual('error'); \n\t\t\texpect(ctrl.getOriginInfo('model._validation.message').getValue()).toEqual('null expected'); \n\n\n\t\t});\n\n\n\n\t});\n\n\n});\n\n\n"},{"key":"path","val":"frontend/test/controls/TestValidation.js"},{"key":"ext","val":"js"}]},{"key":"Text","val":[{"key":"description"},{"key":"inherits","attr":{"ref":"theModel.clientWorkspace.libs.standard.controls.ClientControl"}},{"key":"fields","val":[{"key":"model","val":[{"key":"name","val":"text"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]}]}]},{"key":"TextArea","val":[{"key":"description"},{"key":"inherits","attr":{"ref":"theModel.clientWorkspace.libs.standard.controls.ClientControl"}},{"key":"fields","val":[{"key":"model","val":[{"key":"name","val":"text"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]},{"key":"onKeyUp","val":[{"key":"name","val":"onKeyUp"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.function"}}]}]}]},{"key":"TextInput","val":[{"key":"description"},{"key":"inherits","attr":{"ref":"theModel.clientWorkspace.libs.standard.controls.ClientControl"}},{"key":"fields","val":[{"key":"model","val":[{"key":"name","val":"text"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]},{"key":"onKeyUp","val":[{"key":"name","val":"onKeyUp"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.function"}}]}]}]},{"key":"testAppControl","val":[{"key":"inherits","attr":{"ref":"theModel.clientWorkspace.libs.standard.controls.AppControlBase"}},{"key":"fields","val":[{"key":"model","val":[{"key":"name","val":"standard"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.standard"}}]},{"key":"testItem","val":[{"key":"name","val":"testItem"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.testItem"}}]}]}]},{"key":"testDragDrop","val":[{"key":"inherits","attr":{"ref":"theModel.clientWorkspace.libs.standard.controls.AppControlBase"}},{"key":"fields","val":[{"key":"model","val":[{"key":"name","val":"testApp"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.standard"}}]}]},{"key":"innerMarkup","val":[{"key":"div","attr":{"class":"horizontal"},"val":[{"key":"control","attr":{"ref":"standard:ArrayControl"},"val":[{"key":"childElement","val":[{"key":"div"}]},{"key":"displayControl","attr":{"ref":"standard:Text"},"val":[{"key":"mapPath","attr":{"ref":"text"}},{"key":"dragDrop","val":[{"key":"draggable","val":"true"},{"key":"ondrop","val":[{"key":"exec","attr":{"ref":"this.alert"},"val":[{"key":"message","val":"hello!"}]}]}]},{"key":"triggers","val":[{"key":"func","attr":{"ref":"this.setClass"},"val":[{"key":"class","val":"{{this.model._ddSide==\"INNER\"?\"overProxySide_INNER\":this.model._ddSide==\"TOP\"?\"overProxySide_TOP\":this.model._ddSide==\"BOT\"?\"overProxySide_BOT\":this.model._ddSide==\"RIGHT\"?\"overProxySide_RIGHT\":this.model._ddSide==\"LEFT\"?\"overProxySide_LEFT\":\"\"}}"}]}]}]},{"key":"model","props":[{"key":"_bind","attr":{"ref":"model.testEmbItems"}}]}]}]}]}]},{"key":"testImage","val":[{"key":"inherits","attr":{"ref":"theModel.clientWorkspace.libs.standard.controls.AppControlBase"}},{"key":"fields","val":[{"key":"model","val":[{"key":"name","val":"standard"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.standard"}}]},{"key":"url","val":[{"key":"name","val":"url"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.url"}}]}]},{"key":"innerMarkup","val":[{"key":"div","val":[{"key":"input","attr":{"type":"text","placeholder":"http://placehold.it/350x150"},"val":[{"key":"control","attr":{"ref":"standard:TextInput"},"val":[{"key":"containerEvents","val":[{"key":"blur","val":[{"key":"exec","attr":{"ref":"this.setControlDataToModel"}}]}]},{"key":"model","props":[{"key":"_bind","attr":{"ref":"url"}}]}]}]}]},{"key":"div","val":[{"key":"input","attr":{"type":"file"},"val":[{"key":"control","attr":{"ref":"standard:FileInputImage"},"val":[{"key":"model","props":[{"key":"_bind","attr":{"ref":"url"}}]}]}]}]},{"key":"div","val":[{"key":"a","attr":{"href":"#","download":"file.file"},"val":[{"key":"control","attr":{"ref":"standard:Download"},"val":[{"key":"extactText","val":"download me!"},{"key":"model","props":[{"key":"_bind","attr":{"ref":"url"}}]}]}]}]},{"key":"img","attr":{"src":"{{this.url}}"}},{"key":"select","val":[{"key":"control","attr":{"ref":"standard:ArraySelect"},"val":[{"key":"childElement","val":[{"key":"option"}]},{"key":"displayControl","val":[{"key":"innerMarkup","val":"{{item.text}}"}]},{"key":"model","val":[{"key":"a0","val":[{"key":"text","val":"Full Date/Time"},{"key":"function","val":[{"key":"exec","attr":{"ref":"win2.setDisabled"}},{"key":"exec","attr":{"ref":"win2.setValue"},"val":[{"key":"text","val":"EEEE, MMMM d, y h:mm:ss a zzzz"}]}]}]},{"key":"a1","val":[{"key":"text","val":"Long Date/Time"},{"key":"function","val":[{"key":"exec","attr":{"ref":"win2.setDisabled"}},{"key":"exec","attr":{"ref":"win2.setValue"},"val":[{"key":"text","val":"MMMM d, y h:mm:ss a z"}]}]}]},{"key":"a10","val":[{"key":"text","val":"Custom"},{"key":"function","val":[{"key":"exec","attr":{"ref":"win2.setEnabled"}}]}]}]}]}]},{"key":"div","val":[{"key":"input","attr":{"type":"text"},"val":[{"key":"control","attr":{"id":"win2","ref":"standard:TextInput"},"val":[{"key":"model","props":[{"key":"_bind","attr":{"ref":"model"}}]}]}]}]}]}]},{"key":"testNumber","val":[{"key":"inherits","attr":{"ref":"theModel.clientWorkspace.libs.standard.controls.AppControlBase"}},{"key":"fields","val":[{"key":"model","val":[{"key":"name","val":"testApp"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.standard"}}]},{"key":"number","val":[{"key":"name","val":"number"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.number"}}]}]},{"key":"innerMarkup","val":[{"key":"progress","attr":{"style":"font-size:30px;width:300px;","max":"100"},"val":[{"key":"control","attr":{"ref":"standard:NumberInput"},"val":[{"key":"model","props":[{"key":"_bind","attr":{"ref":"number"}}]}]}]},{"key":"div","val":[{"key":"meter","attr":{"style":"font-size:30px;width:300px;","max":"100","min":"0","high":"80","low":"20"},"val":[{"key":"control","attr":{"ref":"standard:NumberInput"},"val":[{"key":"model","props":[{"key":"_bind","attr":{"ref":"number"}}]}]}]}]}]}]},{"key":"util-testItem","val":[{"key":"inherits","attr":{"ref":"theModel.clientWorkspace.libs.standard.controls.ClientControl"}},{"key":"fields","val":[{"key":"model","val":[{"key":"name","val":"text"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.testItem"}}]},{"key":"titleClick","val":[{"key":"name","val":"titleClick"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.function"}}]},{"key":"onDeleteBtnClick","val":[{"key":"name","val":"onDeleteBtnClick"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.function"}}]}]},{"key":"fixedData","val":[{"key":"triggers","val":[{"key":"func1","attr":{"ref":"this.setClass"},"val":[{"key":"class","val":"{{this.model._selection.marked.selected ? \"active\" : \"\"}}"}]},{"key":"func2","attr":{"ref":"this.setClass"},"val":[{"key":"class","val":"{{this.model._selection.default.selected ? \"active\" : \"\"}}"}]}]}]},{"key":"innerMarkup","val":[{"key":"div","val":[{"key":"control","attr":{"id":"mainStackPanel","ref":"standard:StackPanel"},"val":[{"key":"initModule","attr":{"ref":"show"}},{"key":"autoHeight","val":"true"},{"key":"model","val":[{"key":"show","val":[{"key":"innerMarkup","val":[{"key":"table","val":[{"key":"tr","val":[{"key":"td","val":"{{this.model.text._field.name}}"},{"key":"td","attr":{"onclick":"{{ctx.titleClick}}"},"val":[{"key":"control","attr":{"ref":"standard:Text"},"val":[{"key":"model","props":[{"key":"_bind","attr":{"ref":"model.text"}}]}]}]}]},{"key":"tr","val":[{"key":"td","val":"{{this.model.number._field.name}}"},{"key":"td","val":[{"key":"control","attr":{"ref":"standard:Text"},"val":[{"key":"model","props":[{"key":"_bind","attr":{"ref":"model.number"}}]}]}]}]},{"key":"tr","val":[{"key":"td","val":"{{this.model.date._field.name}}"},{"key":"td","val":[{"key":"control","attr":{"ref":"standard:Text"},"val":[{"key":"model","props":[{"key":"_bind","attr":{"ref":"model.date"}}]}]}]}]},{"key":"tr","val":[{"key":"td","val":"{{this.model.bool._field.name}}"},{"key":"td","val":[{"key":"control","attr":{"ref":"standard:Text"},"val":[{"key":"model","props":[{"key":"_bind","attr":{"ref":"model.bool"}}]}]}]}]},{"key":"tr","val":[{"key":"td","val":[{"key":"control","attr":{"ref":"standard:Text"},"val":[{"key":"model","val":"edit"},{"key":"mouseEvents","val":[{"key":"click","val":[{"key":"exec","attr":{"ref":"mainStackPanel.setSingleSelectedItemByMeta"},"val":[{"key":"meta","attr":{"ref":"edit"}}]}]}]}]}]},{"key":"td","val":[{"key":"control","attr":{"ref":"standard:Text"},"val":[{"key":"model","val":"delete"},{"key":"mouseEvents","val":[{"key":"click","val":[{"key":"exec","attr":{"ref":"ctx.execFunction"},"val":[{"key":"path","attr":{"ref":"onDeleteBtnClick"}}]}]}]}]}]}]},{"key":"tr","val":[{"key":"td","val":"delete via bind: "},{"key":"td","val":[{"key":"control","attr":{"ref":"standard:Text"},"val":[{"key":"model","val":"delete"},{"key":"mouseEvents","val":[{"key":"click","props":[{"key":"_bind","attr":{"ref":"onDeleteBtnClick"}}]}]}]}]}]}]}]}]},{"key":"edit","val":[{"key":"innerMarkup","val":[{"key":"table","val":[{"key":"tr","val":[{"key":"td","val":"{{this.model.text._field.name}}"},{"key":"td","attr":{"onclick":"{{ctx.titleClick}}"},"val":[{"key":"input","attr":{"type":"text"},"val":[{"key":"control","attr":{"ref":"standard:TextInput"},"val":[{"key":"model","props":[{"key":"_bind","attr":{"ref":"model.text"}}]}]}]}]}]},{"key":"tr","val":[{"key":"td","val":"{{this.model.number._field.name}}"},{"key":"td","val":[{"key":"input","attr":{"type":"number"},"val":[{"key":"control","attr":{"ref":"standard:NumberInput"},"val":[{"key":"model","props":[{"key":"_bind","attr":{"ref":"model.number"}}]}]}]}]}]},{"key":"tr","val":[{"key":"td","val":"{{this.model.date._field.name}}"},{"key":"td","val":[{"key":"input","attr":{"type":"date"},"val":[{"key":"control","attr":{"ref":"standard:DateInput"},"val":[{"key":"model","props":[{"key":"_bind","attr":{"ref":"model.date"}}]}]}]}]}]},{"key":"tr","val":[{"key":"td","val":"{{this.model.bool._field.name}}"},{"key":"td","val":[{"key":"input","attr":{"type":"checkbox"},"val":[{"key":"control","attr":{"ref":"standard:CheckBox"},"val":[{"key":"model","props":[{"key":"_bind","attr":{"ref":"model.bool"}}]}]}]}]}]},{"key":"tr","val":[{"key":"td","val":[{"key":"control","attr":{"ref":"standard:Text"},"val":[{"key":"model","val":"cancel"},{"key":"mouseEvents","val":[{"key":"click","val":[{"key":"exec","attr":{"ref":"mainStackPanel.setSingleSelectedItemByMeta"},"val":[{"key":"meta","attr":{"ref":"show"}}]}]}]}]}]},{"key":"td","val":[{"key":"control","attr":{"ref":"standard:Text"},"val":[{"key":"model","val":"update"},{"key":"mouseEvents","val":[{"key":"click","val":[{"key":"exec","attr":{"ref":"ctx.save"}},{"key":"exec","attr":{"ref":"mainStackPanel.setSingleSelectedItemByMeta"},"val":[{"key":"meta","attr":{"ref":"show"}}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"key":"theModel_controls_ArrayTreeBase_functions","val":[{"key":"create","val":[{"key":"name","val":"create"},{"key":"description","VAL_CDATA":"Call crud.create"},{"key":"fields","val":[{"key":"withData","val":[{"key":"name","val":"withData"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}}]}]},{"key":"returnType","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}}]},{"key":"delete","val":[{"key":"name","val":"delete"},{"key":"fields"},{"key":"returnType","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}}]},{"key":"setSingleSelectedItem","val":[{"key":"name","val":"setSelectedItem"},{"key":"fields","val":[{"key":"path","val":[{"key":"name","val":"path"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.itemRelRef"}}]}]},{"key":"returnType","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}}]},{"key":"setSingleSelectedItemByMeta","val":[{"key":"name","val":"setSelectedItemByMeta"},{"key":"fields","val":[{"key":"meta","val":[{"key":"name","val":"meta"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.itemRelRef"}}]}]},{"key":"returnType","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}}]}]},{"key":"theModel_controls_ClientControl_functions","val":[{"key":"alert","val":[{"key":"name","val":"alert"},{"key":"fields","val":[{"key":"message","val":[{"key":"name","val":"message"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]}]},{"key":"returnType","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}}]},{"key":"copyModel","val":[{"key":"name","val":"copyModel"},{"key":"fields","val":[{"key":"toControl","val":[{"key":"name","val":"toControl"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.itemRelRef"}}]},{"key":"path","val":[{"key":"name","val":"path"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.itemRelRef"}}]}]},{"key":"returnType","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}}]},{"key":"execFunction","val":[{"key":"name","val":"execFunction"},{"key":"fields","val":[{"key":"path","val":[{"key":"name","val":"path"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.itemRelRef"}}]}]},{"key":"returnType","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}}]},{"key":"getData","val":[{"key":"name","val":"getData"},{"key":"fields","val":[{"key":"path","val":[{"key":"name","val":"path"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.itemRelRef"},"val":[{"key":"itemPath","attr":{"ref":"parent"}}]}]}]},{"key":"returnType","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.itemRelRef"}}]},{"key":"if","val":[{"key":"name","val":"if"},{"key":"fields","val":[{"key":"condition","val":[{"key":"name","val":"condition"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.bool"}}]},{"key":"ontrue","val":[{"key":"name","val":"ontrue"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.function"}}]},{"key":"onfalse","val":[{"key":"name","val":"onfalse"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.function"}}]}]},{"key":"returnType","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}}]},{"key":"kill","val":[{"key":"name","val":"kill"},{"key":"fields"},{"key":"returnType","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}}]},{"key":"loadControl","val":[{"key":"name","val":"loadControl"},{"key":"fields","val":[{"key":"control","val":[{"key":"name","val":"loadControl"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.itemRelRef"}}]}]},{"key":"returnType","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}}]},{"key":"loadExternal","val":[{"key":"name","val":"loadExternal"},{"key":"fields","val":[{"key":"url","val":[{"key":"name","val":"url"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.url"}}]}]},{"key":"returnType","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}}]},{"key":"login","val":[{"key":"name","val":"login"},{"key":"description","VAL_CDATA":" Login starts the default login process (redirect).  The control using the login functin must inherit from a server platforms control base that implements \"loginServer\".   "},{"key":"returnType","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}},{"key":"fields"}]},{"key":"logout","val":[{"key":"name","val":"logout"},{"key":"description","VAL_CDATA":" Login starts the default logout process (redirect).  The control using the login functin must inherit from a server platforms control base that implements \"logoutServer\".   "},{"key":"returnType","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}},{"key":"fields"}]},{"key":"save","val":[{"key":"name","val":"save"},{"key":"fields"},{"key":"returnType","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}}]},{"key":"setClass","val":[{"key":"name","val":"setClass"},{"key":"description"},{"key":"fields","val":[{"key":"class","val":[{"key":"name","val":"class"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]}]}]},{"key":"setData","val":[{"key":"name","val":"setData"},{"key":"description"},{"key":"fields","val":[{"key":"path","val":[{"key":"name","val":"path"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.itemRelRef"},"val":[{"key":"itemPath","attr":{"ref":"parent"}}]}]}]}]},{"key":"setStyleProperty","val":[{"key":"name","val":"setStyleProperty"},{"key":"description"},{"key":"fields","val":[{"key":"property","val":[{"key":"name","val":"property"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]},{"key":"value","val":[{"key":"name","val":"value"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]}]}]},{"key":"toggle","val":[{"key":"name","val":"toggle"},{"key":"description"},{"key":"fields","val":[{"key":"path","val":[{"key":"name","val":"path"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.itemRelRef"}}]}]}]}]},{"key":"theModel_controls_Reference_functions","val":[{"key":"onSelected","val":[{"key":"name","val":"onSelected"},{"key":"fields"},{"key":"returnType","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}}]}]},{"key":"theModel_controls_RichTextEditor_functions","val":[{"key":"setCenterJustification","val":[{"key":"name","val":"setCenterJustification"},{"key":"fields"},{"key":"returnType","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}}]},{"key":"setLeftJustification","val":[{"key":"name","val":"setLeftJustification"},{"key":"fields"},{"key":"returnType","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}}]},{"key":"setRightJustification","val":[{"key":"name","val":"setRightJustification"},{"key":"fields"},{"key":"returnType","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}}]}]},{"key":"theModel_types","val":[{"key":"array","val":[{"key":"description","VAL_CDATA":"An array can be both a list or collection. "},{"key":"configFields","val":[{"key":"arrayFormId","val":[{"key":"name","val":"array type"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.itemRelRef"}}]}]},{"key":"path","val":"frontend/types/array.xml"},{"key":"ext","val":"xml"}]},{"key":"arrayPage","val":[{"key":"fields","val":[{"key":"name","val":[{"key":"name","val":"name"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]}]},{"key":"path","val":"frontend/types/arrayPage.xml"},{"key":"ext","val":"xml"}]},{"key":"basicType","val":[{"key":"inherits","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.basicTypeBase"}},{"key":"fields","val":[{"key":"description","val":[{"key":"name","val":"description"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.markup"}}]},{"key":"configType","val":[{"key":"name","val":"configType"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.itemRelRef"}}]}]},{"key":"path","val":"frontend/types/basicType.xml"},{"key":"ext","val":"xml"}]},{"key":"basicTypeBase","val":[{"key":"description","VAL_CDATA":" This is the base for all basicTypes. "},{"key":"inherits","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.superBase"}},{"key":"fields","val":[{"key":"inherits","val":[{"key":"name","val":"inherits"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.itemRelRef"},"val":[{"key":"itemPath","attr":{"ref":"theModel.clientWorkspace.libs.standard.types"}}]}]}]},{"key":"path","val":"frontend/types/basicTypeBase.xml"},{"key":"ext","val":"xml"}]},{"key":"bool","val":[{"key":"description"},{"key":"path","val":"frontend/types/bool.xml"},{"key":"ext","val":"xml"}]},{"key":"clientGlobal","val":[{"key":"fields","val":[{"key":"userId","val":[{"key":"name","val":"userId"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.itemRelRef"}}]},{"key":"isAuth","val":[{"key":"name","val":"isAuth"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.bool"}}]},{"key":"roles","val":[{"key":"name","val":"roles"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.array"},"val":[{"key":"arrayFormId","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]}]}]},{"key":"path","val":"frontend/types/clientGlobal.xml"},{"key":"ext","val":"xml"}]},{"key":"collection","val":[{"key":"description","VAL_CDATA":"An collection of documents. "},{"key":"configFields","val":[{"key":"arrayFormId","val":[{"key":"name","val":"collection type"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.itemRelRef"}}]}]},{"key":"path","val":"frontend/types/collection.xml"},{"key":"ext","val":"xml"}]},{"key":"color","val":[{"key":"path","val":"frontend/types/color.xml"},{"key":"ext","val":"xml"}]},{"key":"command","val":[{"key":"fields","val":[{"key":"text","val":[{"key":"name","val":"text"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]},{"key":"function","val":[{"key":"name","val":"function"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.function"}}]},{"key":"sub","val":[{"key":"name","val":"sub"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.array"},"val":[{"key":"arrayFormId","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.command"}}]}]}]},{"key":"path","val":"frontend/types/command.xml"},{"key":"ext","val":"xml"}]},{"key":"control","val":[{"key":"inherits","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.superBase"}},{"key":"fields","val":[{"key":"description","val":[{"key":"name","val":"description"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.markup"}}]},{"key":"innerMarkup","val":[{"key":"name","val":"innerMarkup"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.markup"}}]},{"key":"functions","val":[{"key":"name","val":"functions"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.collection"},"val":[{"key":"arrayFormId","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.functionDef"}}]}]},{"key":"fixedData","val":[{"key":"name","val":"fixedData"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}}]},{"key":"inherits","val":[{"key":"name","val":"inherits"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.itemRelRef"},"val":[{"key":"itemPath","attr":{"ref":"theModel.clientWorkspace.libs.standard.controls"}}]}]}]},{"key":"path","val":"frontend/types/control.xml"},{"key":"ext","val":"xml"}]},{"key":"customValidation","val":[{"key":"description","VAL_CDATA":" "},{"key":"fields","val":[{"key":"description","val":[{"key":"name","val":"description"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.markup"}}]},{"key":"code","val":[{"key":"name","val":"code"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.markup"}}]}]},{"key":"path","val":"frontend/types/customValidation.xml"},{"key":"ext","val":"xml"}]},{"key":"dataAccess","val":[{"key":"description","VAL_CDATA":"data read/write access definition.  Access is checked top-to-bottom"},{"key":"fields","val":[{"key":"baseReadFilter","val":[{"key":"name","val":"baseReadFilter"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.queryCondition"}}]},{"key":"baseWriteFilter","val":[{"key":"name","val":"baseReadFilter"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.queryCondition"}}]},{"key":"readAccess","val":[{"key":"name","val":"read access"},{"key":"description","VAL_CDATA":"specify general to details as they get filtered."},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.array"},"val":[{"key":"arrayFormId","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.dataPathAccess"}}]}]},{"key":"writeAccess","val":[{"key":"name","val":"write access"},{"key":"description","VAL_CDATA":"specify general to details as they get filtered."},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.array"},"val":[{"key":"arrayFormId","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.dataPathAccess"}}]}]}]},{"key":"path","val":"frontend/types/dataAccess.xml"},{"key":"ext","val":"xml"}]},{"key":"dataPathAccess","val":[{"key":"description","VAL_CDATA":"Access permissions for one data path."},{"key":"fields","val":[{"key":"path","val":[{"key":"name","val":"path"},{"key":"description","VAL_CDATA":"Access permissions for one data path."},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]},{"key":"excludeSubPaths","val":[{"key":"name","val":"exclude sub paths"},{"key":"description","VAL_CDATA":"exclude sub paths (default is include)."},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.bool"}}]},{"key":"subPaths","val":[{"key":"name","val":"sub paths"},{"key":"description","VAL_CDATA":"sub paths to include/exclude from parent path."},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.array"},"val":[{"key":"arrayFormId","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]}]},{"key":"condition","val":[{"key":"name","val":"condition"},{"key":"description","VAL_CDATA":"Optional condition for access."},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.queryCondition"}}]}]},{"key":"path","val":"frontend/types/dataPathAccess.xml"},{"key":"ext","val":"xml"}]},{"key":"date","val":[{"key":"path","val":"frontend/types/date.xml"},{"key":"ext","val":"xml"}]},{"key":"displayControl","val":[{"key":"description","VAL_CDATA":" Specifies the control to display an item "},{"key":"fields","val":[{"key":"innerMarkup","val":[{"key":"name","val":"innerMarkup"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}}]},{"key":"mapPath","val":[{"key":"name","val":"mapPath"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.itemRelRef"}}]}]},{"key":"path","val":"frontend/types/displayControl.xml"},{"key":"ext","val":"xml"}]},{"key":"displayControlFilter","val":[{"key":"description"},{"key":"fields","val":[{"key":"filter","val":[{"key":"name","val":"filter"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.queryCondition"}}]},{"key":"displayControl","val":[{"key":"name","val":"displayControl"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.displayControl"}}]}]},{"key":"path","val":"frontend/types/displayControlFilter.xml"},{"key":"ext","val":"xml"}]},{"key":"dragDrop","val":[{"key":"description","VAL_CDATA":" "},{"key":"fields","val":[{"key":"draggable","val":[{"key":"name","val":"draggable"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.bool"}}]},{"key":"onDrop","val":[{"key":"name","val":"onDrop"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.function"}}]}]},{"key":"path","val":"frontend/types/dragDrop.xml"},{"key":"ext","val":"xml"}]},{"key":"expressionFilter","val":[{"key":"description","VAL_CDATA":" "},{"key":"fields","val":[{"key":"description","val":[{"key":"name","val":"description"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.markup"}}]},{"key":"code","val":[{"key":"name","val":"code"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.markup"}}]}]},{"key":"path","val":"frontend/types/expressionFilter.xml"},{"key":"ext","val":"xml"}]},{"key":"file","val":[{"key":"fields","val":[{"key":"filename","val":[{"key":"name","val":"filename"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]},{"key":"key","val":[{"key":"name","val":"key"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]},{"key":"contentType","val":[{"key":"name","val":"contentType"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]},{"key":"size","val":[{"key":"name","val":"size"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.number"}}]},{"key":"creationDate","val":[{"key":"name","val":"creationDate"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.date"}}]}]},{"key":"path","val":"frontend/types/file.xml"},{"key":"ext","val":"xml"}]},{"key":"filter","val":[{"key":"description","VAL_CDATA":" Filter "},{"key":"inherits","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.superBase"}},{"key":"fields","val":[{"key":"name","val":[{"key":"name","val":"name"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]},{"key":"description","val":[{"key":"name","val":"description"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.markup"}}]}]},{"key":"path","val":"frontend/types/filter.xml"},{"key":"ext","val":"xml"}]},{"key":"function","val":[{"key":"fields","val":[{"key":"exec","val":[{"key":"name","val":"function"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.itemRelRef"}}]}]},{"key":"path","val":"frontend/types/function.xml"},{"key":"ext","val":"xml"}]},{"key":"functionDef","val":[{"key":"inherits","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.superBase"}},{"key":"fields","val":[{"key":"name","val":[{"key":"name","val":"name"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]},{"key":"description","val":[{"key":"name","val":"description"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.markup"}}]},{"key":"code","val":[{"key":"name","val":"code"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]},{"key":"execCode","val":[{"key":"name","val":"execCode"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.function"}}]},{"key":"access","val":[{"key":"name","val":"access"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]},{"key":"returnType","val":[{"key":"name","val":"returnType"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.itemRelRef"}}]}]},{"key":"path","val":"frontend/types/functionDef.xml"},{"key":"ext","val":"xml"}]},{"key":"globalIndexItem","val":[{"key":"description","VAL_CDATA":" "},{"key":"fields","val":[{"key":"text","val":[{"key":"name","val":"name"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]},{"key":"description","val":[{"key":"name","val":"description"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.markup"}}]},{"key":"hash","val":[{"key":"name","val":"hash"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]}]},{"key":"path","val":"frontend/types/globalIndexItem.xml"},{"key":"ext","val":"xml"}]},{"key":"itemRelRef","val":[{"key":"description","VAL_CDATA":"An itemRelRef represents a selection of and item on an array in the datastore (has a global address path). "},{"key":"configFields","val":[{"key":"relArray","val":[{"key":"name","val":"relArray"},{"key":"description","val":"Convenient way to make embedded selections. Only\n\t\t\t\tsupports text"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.array"},"val":[{"key":"arrayFormId","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]}]},{"key":"itemPath","val":[{"key":"name","val":"itemPath"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.itemRelRef"}}]}]},{"key":"path","val":"frontend/types/itemRelRef.xml"},{"key":"ext","val":"xml"}]},{"key":"location","val":[{"key":"fields","val":[{"key":"lat","val":[{"key":"name","val":"lat"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.number"}}]},{"key":"lng","val":[{"key":"name","val":"lng"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.number"}}]}]},{"key":"path","val":"frontend/types/location.xml"},{"key":"ext","val":"xml"}]},{"key":"locationArea","val":[{"key":"fields","val":[{"key":"name","val":[{"key":"name","val":"name"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]},{"key":"locAreas","val":[{"key":"name","val":"locAreas"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.array"},"val":[{"key":"arrayFormId","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.locationArea"}}]}]}]},{"key":"path","val":"frontend/types/locationArea.xml"},{"key":"ext","val":"xml"}]},{"key":"locationRange","val":[{"key":"fields","val":[{"key":"locStart","val":[{"key":"name","val":"locStart"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.location"}}]},{"key":"locEnd","val":[{"key":"name","val":"locEnd"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.location"}}]}]},{"key":"path","val":"frontend/types/locationRange.xml"},{"key":"ext","val":"xml"}]},{"key":"mailAddress","val":[{"key":"path","val":"frontend/types/mailAddress.xml"},{"key":"ext","val":"xml"}]},{"key":"markup","val":[{"key":"path","val":"frontend/types/markup.xml"},{"key":"ext","val":"xml"}]},{"key":"number","val":[{"key":"path","val":"frontend/types/number.xml"},{"key":"ext","val":"xml"}]},{"key":"password","val":[{"key":"path","val":"frontend/types/password.xml"},{"key":"ext","val":"xml"}]},{"key":"pebbleBase","val":[{"key":"description","VAL_CDATA":"This is the base for all items."},{"key":"fields"},{"key":"path","val":"frontend/types/pebbleBase.xml"},{"key":"ext","val":"xml"}]},{"key":"pixelOffset","val":[{"key":"fields","val":[{"key":"x","val":[{"key":"name","val":"x"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.number"}}]},{"key":"y","val":[{"key":"name","val":"y"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.number"}}]}]},{"key":"path","val":"frontend/types/pixelOffset.xml"},{"key":"ext","val":"xml"}]},{"key":"query","val":[{"key":"fields","val":[{"key":"path","val":[{"key":"name","val":"ancestor path"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.itemRelRef"}}]},{"key":"index","val":[{"key":"name","val":"index"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.number"}}]},{"key":"rows","val":[{"key":"name","val":"rows"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.number"}}]},{"key":"condition","val":[{"key":"name","val":"condition"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.queryCondition"}}]}]},{"key":"path","val":"frontend/types/query.xml"},{"key":"ext","val":"xml"}]},{"key":"queryCondition","val":[{"key":"fields"},{"key":"path","val":"frontend/types/queryCondition.xml"},{"key":"ext","val":"xml"}]},{"key":"rtc","val":[{"key":"description","VAL_CDATA":"rtc."},{"key":"fields","val":[{"key":"offer","val":[{"key":"name","val":"offer"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]},{"key":"offerCandidate","val":[{"key":"name","val":"offerCandidate"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]},{"key":"answer","val":[{"key":"name","val":"answer"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]},{"key":"answerCandidate","val":[{"key":"name","val":"anserCandidate"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]},{"key":"cancelled","val":[{"key":"name","val":"cancelled"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.bool"}}]}]},{"key":"path","val":"frontend/types/rtc.xml"},{"key":"ext","val":"xml"}]},{"key":"sortField","val":[{"key":"fields","val":[{"key":"name","val":[{"key":"name","val":"name"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]},{"key":"sortDir","val":[{"key":"name","val":"sortDir"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]}]},{"key":"path","val":"frontend/types/sortField.xml"},{"key":"ext","val":"xml"}]},{"key":"standard","val":[{"key":"fields","val":[{"key":"name","val":[{"key":"name","val":"name"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]},{"key":"description","val":[{"key":"name","val":"description"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.markup"}}]},{"key":"testItem","val":[{"key":"name","val":"testItem"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.testItem"}}]},{"key":"testItems","val":[{"key":"name","val":"testItems"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.collection"},"val":[{"key":"arrayFormId","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.testItem"}}]}]},{"key":"testEmbItems","val":[{"key":"name","val":"testEmbItems"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.array"},"val":[{"key":"arrayFormId","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.testItem"}}]}]}]},{"key":"path","val":"frontend/types/standard.xml"},{"key":"ext","val":"xml"}]},{"key":"superBase","val":[{"key":"description","VAL_CDATA":"  "},{"key":"inherits","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.pebbleBase"}},{"key":"fields","val":[{"key":"fields","val":[{"key":"name","val":"fields"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.array"},"val":[{"key":"arrayFormId","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.typeField"}}]}]}]},{"key":"path","val":"frontend/types/superBase.xml"},{"key":"ext","val":"xml"}]},{"key":"tag","val":[{"key":"path","val":"frontend/types/tag.xml"},{"key":"ext","val":"xml"}]},{"key":"testItem","val":[{"key":"fields","val":[{"key":"text","val":[{"key":"name","val":"text"},{"key":"description","VAL_CDATA":"test text field, required"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}},{"key":"validation","val":[{"key":"isRequired","val":"true"}]}]},{"key":"markup","val":[{"key":"name","val":"markup"},{"key":"description","VAL_CDATA":"test markup field"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.markup"}}]},{"key":"number","val":[{"key":"name","val":"number"},{"key":"description","VAL_CDATA":"test number field"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.number"}}]},{"key":"url","val":[{"key":"name","val":"url"},{"key":"description","VAL_CDATA":"test url field"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.url"}}]},{"key":"date","val":[{"key":"name","val":"date"},{"key":"description","VAL_CDATA":"test date field"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.date"}}]},{"key":"bool","val":[{"key":"name","val":"bool"},{"key":"description","VAL_CDATA":"test bool field"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.bool"}}]},{"key":"color","val":[{"key":"name","val":"color"},{"key":"description","VAL_CDATA":"test color field"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.color"}}]},{"key":"file","val":[{"key":"name","val":"file"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.file"}}]},{"key":"referenceExternal","val":[{"key":"name","val":"referenceExternal"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.itemRelRef"},"val":[{"key":"itemPath","attr":{"ref":"theModel.testItems"}}]}]},{"key":"referenceEmbedded","val":[{"key":"name","val":"referenceEmbedded"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.itemRelRef"},"val":[{"key":"relArray","val":[{"key":"a0","val":"Category 1"},{"key":"a1","val":"Category 2"},{"key":"a2","val":"Category 3"},{"key":"a3","val":"Category 4"},{"key":"a4","val":"Category 5"}]}]}]},{"key":"referenceExternalMultiple","val":[{"key":"name","val":"referenceExternalMultiple"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.array"},"val":[{"key":"arrayFormId","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.itemRelRef"},"val":[{"key":"itemPath","attr":{"ref":"theApp.theControlApp.libs"}}]}]}]},{"key":"referenceEmbeddedMultiple","val":[{"key":"name","val":"referenceEmbeddedMultiple"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.array"},"val":[{"key":"arrayFormId","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.itemRelRef"},"val":[{"key":"relArray","val":[{"key":"a0","val":"Category 1"},{"key":"a1","val":"Category 2"},{"key":"a2","val":"Category 3"},{"key":"a3","val":"Category 4"},{"key":"a4","val":"Category 5"}]}]}]}]}]},{"key":"path","val":"frontend/types/testItem.xml"},{"key":"ext","val":"xml"}]},{"key":"text","val":[{"key":"path","val":"frontend/types/text.xml"},{"key":"ext","val":"xml"}]},{"key":"typeField","val":[{"key":"fields","val":[{"key":"name","val":[{"key":"name","val":"name"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]},{"key":"description","val":[{"key":"name","val":"description"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.markup"}}]},{"key":"type","val":[{"key":"name","val":"type"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.itemRelRef"},"val":[{"key":"configFieldsPath","attr":{"ref":"configFields"}}]}]},{"key":"validation","val":[{"key":"name","val":"validation"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.validation"}}]},{"key":"status","val":[{"key":"name","val":"status"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]},{"key":"actorGroups","val":[{"key":"name","val":"actorGroups"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.array"},"val":[{"key":"arrayFormId","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.itemRelRef"}}]}]}]},{"key":"path","val":"frontend/types/typeField.xml"},{"key":"ext","val":"xml"}]},{"key":"undefined","val":[{"key":"path","val":"frontend/types/undefined.xml"},{"key":"ext","val":"xml"}]},{"key":"url","val":[{"key":"description","val":"External url"},{"key":"path","val":"frontend/types/url.xml"},{"key":"ext","val":"xml"}]},{"key":"username","val":[{"key":"path","val":"frontend/types/username.xml"},{"key":"ext","val":"xml"}]},{"key":"validation","val":[{"key":"description"},{"key":"fields","val":[{"key":"isRequired","val":[{"key":"name","val":"required"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.bool"}}]},{"key":"regex","val":[{"key":"name","val":"regex"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]},{"key":"annotations","val":[{"key":"name","val":"annotations"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]},{"key":"filters","val":[{"key":"name","val":"filters"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.array"},"val":[{"key":"arrayFormId","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.validationFilter"}}]}]}]},{"key":"path","val":"frontend/types/validation.xml"},{"key":"ext","val":"xml"}]},{"key":"validationFilter","val":[{"key":"description","VAL_CDATA":" "},{"key":"fields","val":[{"key":"filter","val":[{"key":"name","val":"filter"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.queryCondition"}}]},{"key":"status","val":[{"key":"name","val":"status"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.validationStatus"}}]}]},{"key":"path","val":"frontend/types/validationFilter.xml"},{"key":"ext","val":"xml"}]},{"key":"validationStatus","val":[{"key":"description","VAL_CDATA":"\n             Return value of validation filter.\n            "},{"key":"fields","val":[{"key":"level","val":[{"key":"name","val":"level"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]},{"key":"message","val":[{"key":"name","val":"message"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]}]},{"key":"path","val":"frontend/types/validationStatus.xml"},{"key":"ext","val":"xml"}]},{"key":"win","val":[{"key":"fields","val":[{"key":"name","val":[{"key":"name","val":"name"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.text"}}]},{"key":"item","val":[{"key":"name","val":"item"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.itemRelRef"}}]}]},{"key":"path","val":"frontend/types/win.xml"},{"key":"ext","val":"xml"}]},{"key":"winMouseEvents","val":[{"key":"fields","val":[{"key":"ctxmenu","val":[{"key":"name","val":"ctxmenu"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.array"},"val":[{"key":"arrayFormId","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.command"}}]}]},{"key":"click","val":[{"key":"name","val":"click"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.function"}}]},{"key":"dblclick","val":[{"key":"name","val":"dblclick"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.function"}}]},{"key":"mouseover","val":[{"key":"name","val":"mouseover"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.function"}}]}]},{"key":"path","val":"frontend/types/winMouseEvents.xml"},{"key":"ext","val":"xml"}]}]},{"key":"theModel_services","val":[{"key":"createItem","val":[{"key":"name","val":"createItem"},{"key":"fields"},{"key":"returnType","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}},{"key":"path","val":"server/services/createItem.xml"},{"key":"ext","val":"xml"}]},{"key":"deleteItem","val":[{"key":"name","val":"deleteItem"},{"key":"fields"},{"key":"returnType","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}},{"key":"path","val":"server/services/deleteItem.xml"},{"key":"ext","val":"xml"}]},{"key":"doInit","val":[{"key":"name","val":"doInit"},{"key":"description","VAL_CDATA":" Roles are retrieved when app is loaded.    "},{"key":"returnType","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}},{"key":"fields"},{"key":"path","val":"server/services/doInit.xml"},{"key":"ext","val":"xml"}]},{"key":"doQuery","val":[{"key":"returnType","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.array"}},{"key":"name","val":"doQuery"},{"key":"fields","val":[{"key":"query","val":[{"key":"name","val":"query"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.query"}}]}]},{"key":"path","val":"server/services/doQuery.xml"},{"key":"ext","val":"xml"}]},{"key":"extractApp","val":[{"key":"returnType","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.array"}},{"key":"name","val":"extractApp"},{"key":"fields","val":[{"key":"appPath","val":[{"key":"name","val":"appPath"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.itemRelRef"}}]}]},{"key":"path","val":"server/services/extractApp.xml"},{"key":"ext","val":"xml"}]},{"key":"importApp","val":[{"key":"returnType","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.array"}},{"key":"name","val":"importApp"},{"key":"fields","val":[{"key":"colPath","val":[{"key":"name","val":"colPath"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.itemRelRef"}}]},{"key":"app","val":[{"key":"name","val":"app"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}}]}]},{"key":"path","val":"server/services/importApp.xml"},{"key":"ext","val":"xml"}]},{"key":"loginServer","val":[{"key":"name","val":"loginServer"},{"key":"access","attr":{"ref":"private"}},{"key":"returnType","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}},{"key":"fields"},{"key":"path","val":"server/services/loginServer.xml"},{"key":"ext","val":"xml"}]},{"key":"logoutServer","val":[{"key":"name","val":"logoutServer"},{"key":"access","attr":{"ref":"private"}},{"key":"returnType","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}},{"key":"fields"},{"key":"path","val":"server/services/logoutServer.xml"},{"key":"ext","val":"xml"}]},{"key":"replaceDs","val":[{"key":"returnType","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.array"}},{"key":"name","val":"replaceDs"},{"key":"fields","val":[{"key":"colPath","val":[{"key":"name","val":"colPath"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.itemRelRef"}}]},{"key":"app","val":[{"key":"name","val":"app"},{"key":"type","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}}]}]},{"key":"path","val":"server/services/replaceDs.xml"},{"key":"ext","val":"xml"}]},{"key":"retrieveItem","val":[{"key":"name","val":"retrieveItem"},{"key":"fields"},{"key":"returnType","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}},{"key":"path","val":"server/services/retrieveItem.xml"},{"key":"ext","val":"xml"}]},{"key":"testItems","val":[{"key":"name","val":"testItems"},{"key":"fields"},{"key":"returnType","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}},{"key":"query","val":[{"key":"select","val":[{"key":"field","attr":{"ref":"*"}}]},{"key":"from","val":[{"key":"path","attr":{"ref":"testItems"}}]}]},{"key":"path","val":"server/services/testItems.xml"},{"key":"ext","val":"xml"}]},{"key":"updateItem","val":[{"key":"name","val":"updateItem"},{"key":"fields"},{"key":"returnType","attr":{"ref":"theModel.clientWorkspace.libs.standard.types.undefined"}},{"key":"path","val":"server/services/updateItem.xml"},{"key":"ext","val":"xml"}]}]}]}